var Ma=Object.defineProperty;var at=(e,t)=>{for(var n in t)Ma(e,n,{get:t[n],enumerable:!0})};Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(t!==null&&t.nodeType===1);return null});import*as or from"d3fc/index.js";import*as pe from"d3fc/index.js";var C={none:"none",ordinal:"ordinal",time:"time",linear:"linear"},Oe=e=>{let t="crossValues",n=null,r=null,a=()=>{let o=i=>{let l=n?e[t].filter(s=>n==s.name):e[t];return t=="crossValues"&&l.length>1?!1:l.some(s=>i.includes(s.type))};return e[t].length===0?C.none:r!=C.time&&o(["datetime","date"])?C.time:r!=C.linear&&o(["integer","float"])||r==C.ordinal?C.linear:C.ordinal};return a.settingName=(...o)=>o.length?(t=o[0],a):t,a.settingValue=(...o)=>o.length?(n=o[0],a):n,a.excludeType=(...o)=>o.length?(r=o[0],a):r,a};var Bt={};at(Bt,{domain:()=>Ea,labelFunction:()=>Rt,scale:()=>Fa});import*as vn from"d3";var Sn=e=>{let t=n=>(r,a)=>r===void 0?a:a===void 0?r:n(r,a);return e.reduce((n,r)=>[t(Math.min)(n[0],r[0]),t(Math.max)(n[1],r[1])],[void 0,void 0])},se=e=>Array.isArray(e)?e.flat(1/0):[e];import{rebindAll as za}from"d3fc/index.js";var Oa=1,ot=e=>{let t=n=>e(n);return za(t,e),t.bandwidth=(...n)=>n.length?(e.bandwidth(...n),t):Math.max(e.bandwidth(),Oa),t};import{rebindAll as Pa}from"d3fc/index.js";var bn=e=>{let t=n=>e(n);return Pa(t,e),t.ticks=function(){return[]},t};var Fa=()=>bn(ot(vn.scaleBand())),Ea=()=>{let e=["crossValue"],t="horizontal",n=a=>{let o=se(a);return r([...new Set(o.map(i=>i[e[0]]))])},r=a=>t=="vertical"?a.reverse():a;return n.valueName=(...a)=>a.length?(e=[a[0]],n):e[0],n.valueNames=(...a)=>a.length?(e=a[0],n):e,n.orient=(...a)=>a.length?(t=a[0],n):t,n},Rt=e=>t=>t[e].join("|");var ct={};at(ct,{component:()=>Ha,domain:()=>$t,labelFunction:()=>It,scale:()=>Ba,tickFormatFunction:()=>Gt});import*as Ye from"d3";import*as Q from"d3fc/index.js";import*as ce from"d3-array";var it=()=>{let e=[0,0],t="percent",n=r=>{switch(t){case"domain":{r[0]-=e[0],r[1]+=e[1];break}case"percent":{let a=r[1]-r[0];r[0]-=e[0]*a,r[1]+=e[1]*a;break}default:throw new Error("Unknown padUnit: "+t)}return r};return n.pad=function(...r){return r.length?(e=r[0],n):e},n.padUnit=function(...r){return r.length?(t=r[0],n):t},n};var Vn=function(){let e=[function(o){return o}],t=null,n=[],r=it(),a=function(i){let l=new Array(i.length),s=!0,c=!1,u,d=e[Symbol.iterator]();try{for(let p;!(s=(p=d.next()).done);s=!0){let h=p.value;for(let f=0;f<i.length;f++){let y=h(i[f],f);Array.isArray(y)?l.push.apply(l,Ht(y)):l.push(y)}}}catch(p){c=!0,u=p}finally{try{!s&&d.return&&d.return()}finally{if(c)throw u}}let m=[ce.min(l),ce.max(l)];if(m[0]=m[0]==null?ce.min(n):ce.min([m[0]].concat(Ht(n))),m[1]=m[1]==null?ce.max(n):ce.max([m[1]].concat(Ht(n))),t!=null){let p=Math.max(Math.abs(m[1]-t),Math.abs(m[0]-t));m[0]=t-p,m[1]=t+p}return r(m)};return a.accessors=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],a):e},a.pad=function(...o){return o.length?(r.pad(o[0]),a):r.pad},a.padUnit=function(...o){return o.length?(r.padUnit(o[0]),a):r.padUnit},a.include=function(...o){return o.length?(n=o[0],a):n},a.symmetricalAbout=function(...o){return o.length?(t=o[0],a):t},a.paddingStrategy=function(...o){return o.length?(r=o[0],a):r},a},Ht=function(e){if(Array.isArray(e)){let t=Array(e.length);for(let n=0;n<e.length;n++)t[n]=e[n];return t}else return Array.from(e)};import*as lt from"d3";var Ra=1e7,st=(e,t)=>{let n=Math.ceil(Math.abs(Math.log10(t-e)))+1;return r=>Math.abs(r)>=Ra?lt.format(".3s")(r):Number.isInteger(r)?lt.format(",.0f")(r):lt.format(`,.${n}f`)(r)};function Pe(e){return e.getRootNode().host}function ue(e){return e.closest("#container.chart")}var Ba=()=>Ye.scaleLinear(),$t=()=>{let e=Vn().pad([0,.1]).padUnit("percent"),t=["crossValue"],n=o=>(e.accessors(t.map(i=>l=>parseFloat(l[i]))),a(se(o)));Q.rebindAll(n,e);let r=o=>{let i=t.map(l=>o.map(s=>s[l]).sort((s,c)=>s-c).filter((s,c,u)=>c===0||s!==u[c-1]).reduce((s,c,u,d)=>u===0||s<=c-d[u-1]?s:Math.abs(c-d[u-1])));return Math.min(...i)},a=o=>{if(e.padUnit()=="domain"){let i=r(o);return e.pad([i/2,i/2])(o)}else return e(o)};return n.valueName=(...o)=>o.length?(t=[o[0]],n):t[0],n.valueNames=(...o)=>o.length?(t=o[0],n):t,n},It=e=>t=>t[e][0],Gt=st,Ha=e=>{let t=null,n="horizontal",r=null,a=(c,u)=>{try{return ue(c.node()).querySelector(".cartesian-chart").querySelector(`.${u}-axis`)}catch{return null}},o=c=>{let u=Ye.select(c).select("text").node();u.style.fontSize="80%"},i=(c,u)=>{let d=c.getBoundingClientRect();u.each((m,p,h)=>{let f=Ye.select(h[p]).node().getBoundingClientRect();(n=="vertical"&&d.width<f.width||n=="horizontal"&&d.height<f.height)&&o(h[p])})},l=(c,u,d)=>{let m=a(c,u);m&&i(m,c)},s=()=>({bottom:Q.axisBottom,left:Q.axisLeft,top:Q.axisTop,right:Q.axisRight,decorate:l});return s.domain=(...c)=>c.length?(t=c[0],s):t,s.orient=(...c)=>c.length?(n=c[0],s):n,s.settingName=(...c)=>c.length?(r=c[0],s):r,s};var jt={};at(jt,{domain:()=>Ia,labelFunction:()=>Wt,scale:()=>$a});import*as wn from"d3";import*as Fe from"d3fc/index.js";var $a=()=>wn.scaleTime(),Ia=()=>{let e=Fe.extentTime(),t=["crossValue"],n=o=>(e.accessors(t.map(i=>l=>new Date(l[i]))),a(se(o)));Fe.rebindAll(n,e,Fe.exclude("include","paddingStrategy"));let r=o=>{let i=t.map(l=>o.map(s=>new Date(s[l]).getTime()).sort((s,c)=>s-c).filter((s,c,u)=>c===0||s!==u[c-1]).reduce((s,c,u,d)=>u===0||Math.abs(s)<=Math.abs(c-d[u-1])?Math.abs(s):Math.abs(c-d[u-1])));return Math.min(...i)},a=o=>{let i=Math.abs(r(o));return e.padUnit("domain").pad([i/2,i/2])(o)};return n.valueName=(...o)=>o.length?(t=[o[0]],n):t[0],n.valueNames=(...o)=>o.length?(t=o[0],n):t,n},Wt=e=>t=>new Date(t[e][0]);var Ut={};at(Ut,{component:()=>Za,domain:()=>qa,labelFunction:()=>Yt,scale:()=>Xa});import*as Ue from"d3";import*as me from"d3fc/index.js";import{select as Cn,line as Ga}from"d3";import{axisOrdinalTop as Wa,axisOrdinalBottom as ja,axisOrdinalLeft as Ya,axisOrdinalRight as Ua,dataJoin as An,rebindAll as Tn,exclude as Ka}from"d3fc/index.js";var _n=(...e)=>{let t={},n=r=>{for(let a of Object.keys(t))r[a](t[a]);return r};for(let r of e)n[r]=(...a)=>a.length?(t[r]=a[0],n):t[r];return n};var ut=(e,t,n)=>{let r=6,a=6,o=_n("tickFormat","ticks","tickArguments","tickValues","tickPadding"),i=(...f)=>{},l=null,s=An("g","group"),c=An("path","domain"),u=(f,y)=>m()?`translate(${y}, ${f})`:`translate(${f}, ${y})`,d=f=>m()?f.map(y=>[y[1],y[0]]):f,m=()=>e==="left"||e==="right",p=f=>{if(!l){o(t(n).decorate(i))(f);return}f.each((y,g,x)=>{let b=x[g],S=Cn(b),v=e==="bottom"||e==="right"?1:-1,w=n.range(),T=d([[w[0],v*r],[w[0],0],[w[1],0],[w[1],v*r]]);c(S,[y]).attr("d",Ga()(T)).attr("stroke","#000").attr("fill","none");let W=s(S,l),z=$=>Array.isArray(a)?a[$]:a,N=$=>{let M=0;for(let I=0;I<$;I++)M+=z(I);return M};W.attr("transform",($,M)=>u(0,v*N(M))).each(($,M,I)=>{let _=Cn(I[M]),L=h(n,$);o(t(L)).decorate((G,Z)=>i(G,Z,M)).tickSizeInner(z(M)).tickOffset(G=>L.step(G)/2)(_),_.select("path.domain").attr("visibility","hidden")}),W.exit().attr("transform",($,M)=>u(0,v*N(M)))})},h=(f,y)=>{function g(x){let b=x.domain;return b.reduce((S,v)=>S+f(v),0)/b.length}return g.ticks=()=>y,g.tickFormat=()=>x=>x.text,g.copy=()=>h(f,y),g.step=x=>x.domain.length*f.step(),Tn(g,f,Ka("ticks","step","copy")),g};return p.tickSize=(...f)=>f.length?(a=r=Number(f[0]),p):a,p.tickSizeInner=(...f)=>f.length?(a=Array.isArray(f[0])?f[0]:Number(f[0]),p):a,p.tickSizeOuter=(...f)=>f.length?(r=Number(f[0]),p):r,p.decorate=(...f)=>f.length?(i=f[0],p):i,p.groups=(...f)=>f.length?(l=f[0],p):l,Tn(p,o),p},Ln=e=>ut("top",Wa,e),Dn=e=>ut("bottom",ja,e),kn=e=>ut("left",Ya,e),Nn=e=>ut("right",Ua,e);var Xa=()=>ot(Ue.scaleBand()).padding(.5),qa=()=>{let e=["crossValue"],t="horizontal",n=a=>{let o=se(a);return r([...Array.from(new Set(o.map(i=>i[e[0]])))])},r=a=>t=="vertical"?a.reverse():a;return n.valueName=(...a)=>a.length?(e=[a[0]],n):e[0],n.valueNames=(...a)=>a.length?(e=a[0],n):e,n.orient=(...a)=>a.length?(t=a[0],n):t,n},Yt=(e,t)=>n=>n[e].map((r,a)=>{let o=t.crossValues[a].type;return o==="datetime"?new Date(r).toLocaleString(void 0,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",fractionalSecondDigits:3}):o==="date"?new Date(r).toLocaleDateString():r}).join("|"),Za=e=>{let t="horizontal",n="crossValues",r=null,a=()=>{let m=e[n].length>1,p=i(r),h=p.map(l),f=m?h.map(S=>S.size):h[0].size,y=h.reduce((S,v)=>S+v.size,0),g=S=>v=>{let w=S(v);return m&&w.groups(p).tickSizeInner(f).tickSizeOuter(y),t!=="horizontal"&&w.tickPadding(10),w},x=(S,v,w)=>{let T=h[w].rotation;t==="horizontal"&&d(S,T),s(S,T)},b=o(m);return{bottom:g(b.bottom),left:g(b.left),right:g(b.right),top:g(b.top),size:`${y+10}px`,decorate:x}},o=m=>m?{bottom:Dn,left:kn,top:Ln,right:Nn}:{bottom:me.axisOrdinalBottom,left:me.axisOrdinalLeft,top:me.axisOrdinalTop,right:me.axisOrdinalRight},i=m=>{let p=[];return m.forEach(h=>{(h&&h.split?h.split("|"):[h]).forEach((y,g)=>{for(;p.length<=g;)p.push([]);let x=p[g];x.length>0&&x[x.length-1].text===y?x[x.length-1].domain.push(h):x.push({text:y,domain:[h]})})}),p.reverse()},l=m=>{let p=e.size.width,h=Math.max(...m.map(f=>f.text?f.text.length:0));return t==="horizontal"?m&&m.length*16>p-100?{size:h*6.62+10,rotation:90}:m&&m.length*(h*6+10)>p-100?{size:h*4+20,rotation:45}:{size:25,rotation:0}:{size:h*6.62+10,rotation:0}},s=(m,p)=>{let h=v=>{let w=v.indexOf(",")!==-1?",":" ",T=v.substring(v.indexOf("(")+1,v.indexOf(")")).split(w).map(H=>parseInt(H));for(;T.length<2;)T.push(0);return T},g=p?(v,w)=>v.x+v.width+14>w.x+w.width:(v,w)=>v.x<=w.x+w.width&&w.x<=v.x+v.width&&v.y<=w.y+w.height&&w.y<=v.y+v.height,x=(v,w)=>v.x>=w.x&&v.x+v.width<=w.x+w.width&&v.y>=w.y&&v.y+v.height<=w.y+w.height,b=t=="horizontal"?c(m):null,S=[];m.each((v,w,T)=>{let H=Ue.select(T[w]),W=h(H.attr("transform")),z=H.node().getBBox(),N={x:z.x+W[0],y:z.y+W[1],width:z.width,height:z.height},M=S.some(I=>g(I,N))||b&&!x(N,b);H.attr("visibility",M?"hidden":""),M||S.push(N)})},c=m=>{let p=ue(m.node());if(p===null)return;let h=p.querySelector(".cartesian-chart"),f=h.querySelector(".x-axis"),y=h.getBoundingClientRect(),g=f.getBoundingClientRect();return{x:y.left-g.left,width:y.width,y:y.top-g.top,height:y.height}},u=m=>m?m<60?`rotate(-${m} 5 5)`:`rotate(-${m} 3 7)`:"translate(0, 8)",d=(m,p)=>{let h=u(p),f=p?"end":"";m.each((y,g,x)=>{Ue.select(x[g]).select("text").attr("transform",h).style("text-anchor",f)})};return a.orient=(...m)=>m.length?(t=m[0],a):t,a.settingName=(...m)=>m.length?(n=m[0],a):n,a.domain=(...m)=>m.length?(r=m[0],a):r,a};var Ja={none:Bt,ordinal:Ut,time:jt,linear:ct},A=e=>{let t=null,n="horizontal",r="crossValues",a,o=["crossValue"],i=null,l=null,s=["include","paddingStrategy","pad"],c={},u=p=>{let h=Oe(e).excludeType(t).settingName(r).settingValue(a)(),f=Ja[h],y=f.domain().valueNames(o);s.forEach(S=>{c[S]&&y[S]&&y[S](c[S])}),y.orient&&y.orient(n);let g=y(p);i!==null&&(g=i(g)),l&&typeof g[0]=="number"&&(l[0]=g[0]=Math.min(g[0],l[0]),l[1]=g[1]=Math.max(g[1],l[1]));let x=f.hasOwnProperty("component")?d(f,g,p):m(),b=f==ct?Gt(g[0],g[1]):void 0;return{scale:f.scale(),domain:g,domainFunction:y,labelFunction:f.labelFunction,component:{bottom:x.bottom,left:x.left,top:x.top,right:x.right},size:x.size,decorate:x.decorate,label:e[r].map(S=>S.name).join(", "),tickFormatFunction:b}},d=(p,h,f)=>p.component(e).orient(n).settingName(r).domain(h)(f),m=()=>({bottom:pe.axisBottom,left:pe.axisLeft,top:pe.axisTop,right:pe.axisRight,decorate:()=>{}});return u.memoValue=(...p)=>p.length?(l=p[0],u):l,u.excludeType=(...p)=>p.length?(t=p[0],u):t,u.orient=(...p)=>p.length?(n=p[0],u):n,u.settingName=(...p)=>p.length?(r=p[0],u):r,u.settingValue=(...p)=>p.length?(a=p[0],u):a,u.valueName=(...p)=>p.length?(o=[p[0]],u):o[0],u.valueNames=(...p)=>p.length?(o=p[0],u):o,u.modifyDomain=p=>p?(i=p,u):i,s.forEach(p=>{u[p]=(...h)=>h.length?(c[p]=h[0],u):c[p]}),u};import*as de from"d3";import*as _e from"d3fc/index.js";var K=(e,t)=>Mn(e,t,(n,r)=>n.svgPlotArea(r),!1),Ee=(e,t)=>Mn(e,t,(n,r)=>n.canvasPlotArea(r).svgPlotArea(_e.seriesSvgPoint()),!0),Mn=(e,t,n,r)=>{let a=null,o=null,i=_e.chartCartesian({xScale:e.scale,yScale:t.scale,xAxis:e.component,yAxis:t.component}).xDomain(e.domain).xLabel(e.label).xAxisHeight(e.size).xDecorate(e.decorate).xTickFormat(e.tickFormatFunction).yDomain(t.domain).yLabel(t.label).yAxisWidth(t.size).yDecorate(t.decorate).yOrient("left").yTickFormat(t.tickFormatFunction);e.decorate&&i.xDecorate(e.decorate),t.decorate&&i.yDecorate(t.decorate),i.xPaddingInner&&i.xPaddingInner(1),i.xPaddingOuter&&i.xPaddingOuter(.5),i.yPaddingInner&&i.yPaddingInner(1),i.yPaddingOuter&&i.yPaddingOuter(.5),i.axisSplitter=(...s)=>s.length?(a=s[0],i):a,i.altAxis=(...s)=>s.length?(o=s[0],i):o,i.plotArea=function(...s){return s.length==0?r?this.canvasPlotArea():this.svgPlotArea():n(this,...s)};let l=i.decorate();return i.decorate((s,c)=>{let u=s.select("d3fc-svg.plot-area"),d=u.select("svg").node();d.setAttribute("viewBox",`0 0 ${u.node().clientWidth} ${u.node().clientHeight}`),d.setAttribute("preserveAspectRatio","none");for(let m of["x-axis","y-axis"])s.select(`d3fc-svg.${m} svg`).node().setAttribute("preserveAspectRatio","none");if(l(s,c),r){let m=s.select(".svg-plot-area").node(),p=s.select(".canvas-plot-area").node();de.selectAll([m,p]).order()}if(a){if(a.haveSplit()){let m=a.altData(),p=_e.dataJoin("d3fc-svg","y2-axis").key(g=>g),h=_e.dataJoin("g","y-series").key(g=>g);s.append("div").attr("class","y-label right-label").style("grid-column",5).style("-ms-grid-column",5).style("grid-row",3).style("-ms-grid-row",3).style("width",o.size||"1em").style("display","flex").style("align-items","center").style("justify-content","center").append("span").attr("class","y-label splitter-label").style("transform","rotate(-90deg)");let f=o.scale.domain(o.domain),y=o.component.right(f);if(y.tickFormat(o.tickFormatFunction),o.decorate&&y.decorate(o.decorate),p(s,["right"]).attr("class",g=>`y2-axis ${g}-axis`).on("measure",function(g,x){let{width:b,height:S}=g.detail;x==="left"&&de.select(g.currentTarget).select("svg").attr("viewBox",`${-b} 0 ${b} ${S}`).attr("preserveAspectRatio","none"),f.range([S,0])}).on("draw",function(g,x){de.select(g.currentTarget).select("svg").call(y)}),r){let g=x=>{let b=i.plotArea();b.context(x.node().getContext("2d")).xScale(e.scale);let S=[t.scale,f];[c,m].forEach((v,w)=>{b.yScale(S[w]),b(v)})};s.select("d3fc-canvas.plot-area").on("draw",function(x,b){g(de.select(x.currentTarget).select("canvas"))})}else{let g=function(x){let b=i.plotArea();b.xScale(e.scale);let S=[t.scale,f];h(x,[c,m]).each((v,w,T)=>{b.yScale(S[w]),de.select(T[w]).datum(v).call(b)})};s.select("d3fc-svg.plot-area").on("draw",function(x,b){g(de.select(x.currentTarget).select("svg"))})}}a(s)}}),i};import*as ie from"d3fc/index.js";import{select as Xt}from"d3";function O(e,t,n){let r=e.select(t);return r.size()>0?r:n()}function ee(e,t,n="right"){if(n==="right"||n==="bottom")return e[n]<t[n];if(n==="left"||n==="top")return e[n]>t[n];throw`Direction being checked for overflow is invalid: ${n}`}function Kt(e,t,n,r=0){let a=e==="x"?"width":"height",o=t[e],i=t[e]+t[a],l=n[e],s=n[e]+n[a],c=l+r>o&&l-r<i,u=s+r>o&&s-r<i,d=l+r<o&&s-r>i;return c||u||d}var zn=`<ul id="tooltip-values"></ul>
`;import{select as to}from"d3";function oe(e,t){switch(e){case"date":case"datetime":return t instanceof Date?t:new Date(parseInt(t)).toLocaleString([],{dateStyle:"short",timeStyle:"medium"});case"integer":return parseInt(t,10);case"float":return parseFloat(t)}return t}function mt(e,t){return t.crossValues.length===0?[]:e.crossValue.length===0?[]:((e.crossValue.split?e.crossValue.split("|"):Array.isArray(e.crossValue)?e.crossValue:[e.crossValue])||[e.key]).map((r,a)=>({name:t.crossValues[a].name,value:oe(t.crossValues[a].type,r)}))}function pt(e,t){if(t.splitValues.length===0)return[];let n=[e.mainValue];return e.key?n=e.key.split("|"):e.mainValue?.split&&(n=e.mainValue.split("|")),t.splitValues.map((r,a)=>({name:r.name,value:oe(r.type,n[a])}))}function dt(e,t){return t.mainValues.length>1?e.mainValues?t.mainValues.map((n,r)=>({name:n.name,value:oe(n.type,e.mainValues[r])})):t.mainValues.map(n=>({name:n.name,value:oe(n.type,e.row[eo(e.key,n,t.realValues)])})):[{name:t.mainValues[0].name,value:oe(t.mainValues[0].type,e.colorValue||e.mainValue-e.baseValue||e.mainValue||e.mainValues)}]}function eo(e,t,n){if(!e)return t.name;if(e.includes("|")){let a=e.split("|");return a[a.length-1]===t.name?e:`${n.includes(a[a.length-1])?a.slice(0,a.length-1).join("|"):e}|${t.name}`}return n.includes(e)?t.name:`${e}|${t.name}`}function On(e,t,n){let r=mt(t,n).concat(pt(t,n)).concat(dt(t,n));no(e,r)}function no(e,t){e.select("#tooltip-values").selectAll("li").data(t).join("li").each(function(n){to(this).text(`${n.name}: `).append("b").text(ro(n.value))})}var ro=e=>e==null?"-":e.toLocaleString(void 0,{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2});var Pn=e=>[e.name,"==",e.value],Ke=(e,t,n)=>{let r=dt(t,n).map(l=>l.name),a=mt(t,n).map(Pn),o=pt(t,n).map(Pn),i=n.filter.concat(a).concat(o);e.dispatchEvent(new CustomEvent("perspective-click",{bubbles:!0,composed:!0,detail:{column_names:r,config:{filter:i},row:t.row}}))},Fn=()=>{let e=null,t=n=>{let r=n.node();n.on("click",(a,o)=>Ke(r,o,e))};return t.settings=(...n)=>n.length?(e=n[0],t):e,t};var he=()=>{let e=!1,t=null,n=null,r=!1,a=o=>{let i=o.node();if(!i||!i.isConnected){En(t);return}let l=Xt(ue(i));t=ao(l);let s=function(u,d){On(t,d,n);let m=o.nodes(),p=m.indexOf(this);oo(l.node(),m[p],t,r),Xt(m[p]).style("opacity","0.7")},c=function(u,d){En(t);let m=o.nodes(),p=m.indexOf(this);m&&Xt(m[p]).style("opacity","1")};e?o.each(function(u){return s.call(this,void 0,u)}):(o.on("mouseover",s).on("mouseout",c),Fn().settings(n)(o))};return a.alwaysShow=(...o)=>o.length?(e=o[0],a):e,a.centered=(...o)=>o.length?(r=o[0],a):r,a.settings=(...o)=>o.length?(n=o[0],a):n,a};function ao(e){return O(e,"div.tooltip",()=>e.append("div").attr("class","tooltip").style("z-index",3).style("opacity",0).html(zn))}function oo(e,t,n,r){let a=e.getBoundingClientRect(),o=t.getBoundingClientRect(),i=o.left+o.width/2-a.left,l=o.top-a.top+e.scrollTop;r&&(l=o.top+o.height/2-a.top+e.scrollTop),n.style("left",`${i}px`).style("top",`${l}px`).style("opacity",.9),r&&([i,l]=io(n,a)),lo(n,a,i,l,r)}function io(e,t){let n=e.node().getBoundingClientRect(),r=n.width/2,a=n.left-r-t.left;e.style("left",`${a}px`);let o=n.height/2,i=n.top-o-t.top;return e.style("top",`${i}px`),[a,i]}function lo(e,t,n,r,a=!1){let o=e.node().getBoundingClientRect();if(ee(t,o)){let i=o.right-t.right;e.style("left",`${n-i}px`)}if(ee(t,o,"bottom")){let i=o.bottom-t.bottom;e.style("top",`${r-i}px`)}if(a){if(ee(t,o,"left")){let i=o.left-t.left;e.style("left",`${n-i}px`)}if(ee(t,o,"top")){let i=o.top-t.top;e.style("top",`${r-i}px`)}}}function En(e){e&&e.style("opacity",0)}function ht(e,t){let n=e.mainValues.length>1?ie.seriesSvgGrouped(ie.seriesSvgBar()):ie.seriesSvgBar();return n=n.decorate(r=>{he().settings(e)(r),r.style("fill",a=>t(a.key))}),ie.autoBandwidth(so(n)).crossValue(r=>r.crossValue).mainValue(r=>r.mainValue?r.mainValue:0).baseValue(r=>r.baseValue)}var so=e=>{let t=n=>e(n);return ie.rebindAll(t,e),t.bandwidth=(...n)=>n.length?(e.bandwidth(Math.max(n[0],1)),t):e.bandwidth(),t};import*as gt from"d3";function fe(e){return e.split("|").slice(0,-1).join("|")}function ft(e,t){return e.data.map(n=>Object.entries(n).filter(([r,a])=>r.split("|").at(-1)===t&&!!a).map(([r,a])=>a)).flat()}function te(e){let t=e.data&&e.data.length>0?e.data[0]:{},n=Object.keys(t).filter(r=>r!=="__ROW_PATH__");return J().settings(e).domain(n)()}function Rn(e,t){let n=ft(e,t),r=[...new Set(n)].sort();return J().settings(e).domain(r)()}function Ce(e,t){let n=[...new Set(t)];return J().settings(e).domain(n)()}function Bn(e){let t=e.data[0]??{},n=Object.keys(t).filter(a=>a!=="__ROW_PATH__").map(a=>fe(a)),r=[...new Set(n)];return J().settings(e).domain(r)()}function J(){let e=null,t=null,n={},r=o=>Ae(o,n.colorStyles&&n.colorStyles.opacity),a=()=>{let o=n.colorStyles,i=t||[o.series];if(i||e.length>1){let l=e.length>1?o.scheme:i;return gt.scaleOrdinal(l.map(r)).domain(e)}return null};return a.domain=(...o)=>o.length===0?e:(e=o[0],a),a.defaultColors=(...o)=>o.length?(t=o[0],a):t,a.mapFunction=(...o)=>o.length?(r=o[0],a):r,a.settings=(...o)=>o.length?(n=o[0],a):n,a}function ne(e){return Te(1)(e)}function Ae(e,t=.5){return Te(t)(e)}function Te(e){return t=>{let n=gt.color(t);return n!=null&&(n.opacity=e),n+""}}import{rebindAll as co}from"d3fc/index.js";var uo={none:Rt,ordinal:Yt,time:Wt,linear:It},X=e=>{let t=Oe(e),n="__ROW_PATH__",r=uo[t()],a=(o,i)=>r(n,e)(o);return co(a,t),a.valueName=(...o)=>o.length?(n=o[0],a):n,a};function Le(e,t,{stack:n=!1,excludeEmpty:r=!1}={}){let a=t||e.data;return e.splitValues.length>0?mo(e,a,{stack:n,excludeEmpty:r}):[a]}function mo(e,t,{stack:n=!1,excludeEmpty:r=!1}){let a={};return t.forEach(o=>{let i={},l={};Object.keys(o).filter(s=>s!=="__ROW_PATH__").filter(s=>!r||o[s]!=null&&o[s]!=null).forEach(s=>{let c=s.split("|"),u=c[c.length-1],d=o[s]||0,m=`${u}${d>=0?"+ve":"-ve"}`,p=c.slice(0,c.length-1).join("|"),h=l[p]=l[p]||{__ROW_PATH__:o.__ROW_PATH__},f=i[m]||0;h.__KEY__=p,n?(h[u]=f+d,h[`__BASE_VALUE__${u}`]=f,i[m]=h[u]):h[u]=d,h.row=o}),Object.keys(l).forEach(s=>{(a[s]=a[s]||[]).push(l[s])})}),Object.keys(a).map(o=>{let i=a[o];return i.key=o,i})}function Hn(e,t){let n={stack:!1},r=Le(e,t,n).map(a=>$n(e,a,n));return e.mainValues.length>1?r.reduce((o,i)=>o.concat(i)):r}function yt(e,t){let n={stack:!0};return Le(e,t,n).map(r=>$n(e,r,n))}function po(e,t,{stack:n=!1}){let r=X(e);return a=>{let o=l=>n&&l[`__BASE_VALUE__${a.name}`]||0,i=t.map((l,s)=>({crossValue:r(l,s),mainValue:l[a.name]?l[a.name]:null,baseValue:o(l),key:l.__KEY__?`${l.__KEY__}|${a.name}`:a.name,row:l.row||l}));return i.key=i[0].key,i}}function $n(e,t,{stack:n=!1}){let r=po(e,t,{stack:n});return e.mainValues.length>1?e.mainValues.map(r):r(e.mainValues[0])}import*as xt from"d3";import*as St from"d3-svg-legend";import*as Qn from"d3-svg-legend";import{rebindAll as _o}from"d3fc/index.js";var In=`<span id="up-arrow">&#9650;</span>
<span id="page-text"></span>
<span id="down-arrow">&#9660;</span>
`;function Gn(e){let t=e.select("g.legendCells"),n=e.node().getBoundingClientRect();if(!ee(n,t.node().getBoundingClientRect()))return;let r=e.select(".legend");t.selectAll(".label").text((a,o,i)=>{let l=i[o];if(ee(n,l.getBoundingClientRect())){let s=fo(l,r,n);return`${a.substring(0,s-3)}...`}else return a})}function fo(e,t,n){let r=e.getBoundingClientRect(),a=t.node().createSVGPoint(),o=3;return a.x=n.right-r.left-o,a.y=0,e.getCharNumAtPosition(a)}import*as ke from"d3";import*as Wn from"d3";var De=10;function ge(e,t,n){let r=Wn.select(Pe(e).getContainer()).node().getBoundingClientRect(),a=e.getBoundingClientRect(),o={top:a.top+n-De,right:a.right+t+De,bottom:a.bottom+n+De,left:a.left+t-De},i={x:t,y:n};return[{edge:"right",dimension:"x"},{edge:"left",dimension:"x"},{edge:"top",dimension:"y"},{edge:"bottom",dimension:"y"}].forEach(s=>{if(ee(r,o,s.edge)){let c=o[s.edge]-r[s.edge];i[s.dimension]=i[s.dimension]-c}}),i}var qt="resize.for-dragging";function jn(){let e=!0,t=null,n=r=>{let a=r.node(),o=a.getRootNode().host.closest("perspective-viewer");a.style.cursor="move",t.legend&&(a.style.left=t.legend.left,a.style.top=t.legend.top);let i=ke.drag().on("drag",function(l){let s=ge(this,l.dx,l.dy);this.style.left=`${this.offsetLeft+s.x}px`,this.style.top=`${this.offsetTop+s.y}px`;let c={left:this.style.left,top:this.style.top};t.legend={...t.legend,...c},e=xo(a)?yo(a):go(a,e)});i.on("end",function(l){ke.select(window).on(qt,null),o?.dispatchEvent(new Event("perspective-config-update"))}),r.call(i)};return n.settings=(...r)=>r.length?(t=r[0],n):t,n}function go(e,t){return t!==!1&&ke.select(window).on(qt,function(){let n=ge(e,0,0);e.style.left=`${e.offsetLeft+n.x}px`,e.style.top=`${e.offsetTop+n.y}px`}),!1}function yo(e){return ke.select(window).on(qt,null),e.style.left="auto",!0}function xo(e){let t=e.getBoundingClientRect(),n=ke.select(ue(e)).node().getBoundingClientRect(),r=5;return t.right+De+r>=n.right&&t.top-De-r<=n.top}import*as Xe from"d3";var Yn="horizontal-drag-handle",Un="vertical-drag-handle",So="corner-drag-handle",Xn="dragHandles",Kn=0,ye="resize";function qn(){let e=9,t=3,n=null,r={height:100,width:100},a={height:null,width:null},o=[],i=(u,d)=>o.filter(m=>m.event===u).forEach(m=>m.execute(d)),l=u=>{if(vo(u))return;let d={left:V=>i(ye,{horizontal:_(V),vertical:!1}),top:V=>i(ye,{horizontal:!1,vertical:j(V)}),right:V=>i(ye,{horizontal:L(V),vertical:!1}),bottom:V=>i(ye,{horizontal:!1,vertical:G(V)}),topleft:V=>i(ye,{horizontal:_(V),vertical:j(V)}),topright:V=>i(ye,{horizontal:L(V),vertical:j(V)}),bottomright:V=>i(ye,{horizontal:L(V),vertical:G(V)}),bottomleft:V=>i(ye,{horizontal:_(V),vertical:G(V)})},m=u.node();n.legend&&(m.style.height=n.legend.height,m.style.width=n.legend.width);let p=m.getBoundingClientRect(),h=u.append("svg").attr("id",Xn).attr("width",p.width).attr("height",p.height),f=h.append("g"),y=V=>V==="left"||V==="right",g={left:0,top:e,right:p.width-e,bottom:e},x={left:e,top:0,right:e,bottom:p.height-e},b=["left","top","right","bottom"],[S,v,w,T]=b.map(V=>f.append("rect").attr("id",`drag${V}`).attr("class",y(V)?Un:Yn).attr("y",x[V]).attr("x",g[V]).attr("height",y(V)?p.height-e*2:e).attr("width",y(V)?e:p.width-e*2).attr("fill",y(V)?"lightgreen":"lightblue").attr("fill-opacity",Kn).style("z-index",t).attr("cursor",y(V)?"ew-resize":"ns-resize").call(Xe.drag().on("drag",d[V]))),H=V=>`${V[0]}${V[1]}`,W={topleft:"nwse",topright:"nesw",bottomright:"nwse",bottomleft:"nesw"},z=[["top","left"],["top","right"],["bottom","right"],["bottom","left"]],[N,$,M,I]=z.map(V=>f.append("rect").attr("id",`drag${H(V)}`).attr("class",`${So} ${V[0]} ${V[1]}`).attr("height",e).attr("width",e).attr("fill","red").attr("fill-opacity",Kn).style("z-index",t).attr("cursor",`${W[H(V)]}-resize`).call(Xe.drag().on("drag",d[H(V)])));xn("height","y",T),xn("width","x",w),yn(h);function _(V){let k=c(ge(S.node(),V.x,0).x,h,"width",(U,ae)=>U-ae);return m.style.left=`${m.offsetLeft+k}px`,m.style.width=`${m.offsetWidth-k}px`,Z(),we(w,k,"width","x")}function L(V){let k=-c(ge(w.node(),V.dx,0).x,h,"width",(U,ae)=>U+ae);return s(k,"x",w,V)?!1:(m.style.width=`${m.offsetWidth-k}px`,Z(),we(w,k,"width","x"))}function j(V){let k=c(ge(v.node(),0,V.y).y,h,"height",(U,ae)=>U-ae);return m.style.top=`${m.offsetTop+k}px`,m.style.height=`${m.offsetHeight-k}px`,Z(),we(T,k,"height","y")}function G(V){let k=-c(ge(T.node(),0,V.dy).y,h,"height",(U,ae)=>U+ae);return s(k,"y",T,V)?!1:(m.style.height=`${m.offsetHeight-k}px`,Z(),we(T,k,"height","y"))}function Z(){let V={top:m.style.top,left:m.style.left,height:m.style.height,width:m.style.width};n.legend={...n.legend,...V}}function we(V,k,U,ae){return wo(h,U,k),Vo(V,ae,k),bo(h,k,U,U==="height"?Un:Yn),yn(h),k!=0}function yn(V){N.attr("y",0),$.attr("y",0).attr("x",V.attr("width")-e),M.attr("y",V.attr("height")-e).attr("x",V.attr("width")-e),I.attr("y",V.attr("height")-e).attr("x",0)}function xn(V,k,U){a[V]&&a[V]<p[V]&&(m.style[V]=`${a[V]}px`,we(U,p[V]-a[V],V,k))}};l.on=(u,d)=>(o.push({event:u,execute:d}),l),l.zIndex=u=>(t=u,l),l.settings=(...u)=>u.length?(n=u[0],l):n,l.minWidth=u=>(r.width=u,a.width&&(a.width=Math.max(r.width,a.width)),l),l.minHeight=u=>(r.height=u,a.height&&(a.height=Math.max(r.height,a.height)),l),l.handleWidth=u=>(e=u,l),l.maxWidth=u=>(a.width=u,r.width=Math.min(r.width,a.width),l),l.maxHeight=u=>(a.height=u,r.height=Math.min(r.height,a.height),l);function s(u,d,m,p){let h=(y,g,x,b)=>y<0&&b[g]<Number(x.attr(g)),f=(y,g,x,b)=>y>0&&b[g]>Number(x.attr(g));return h(u,d,m,p)||f(u,d,m,p)}function c(u,d,m,p){let h=p(Number(d.attr(m)),u);if(h<r[m]){let f=r[m]-h;return p(u,f)}if(a[m]&&h>a[m]){let f=a[m]-h;return p(u,f)}return u}return l}var bo=(e,t,n,r)=>{e.selectAll(`.${r}`).each((o,i,l)=>{let s=l[i];Xe.select(s).attr(n,s.getBoundingClientRect()[n]-t)})},vo=e=>e.select(`#${Xn}`).size()>0,Vo=(e,t,n)=>e.attr(t,Number(e.attr(t))-n),wo=(e,t,n)=>e.attr(t,e.node().getBoundingClientRect()[t]-n);var Zn=16,Jn=20,Zt=(e,t)=>{let n=e||Qn.legendColor(),r=[],a=1,o,i=t.legend&&t.legend.pageIndex?t.legend.pageIndex:0,l=()=>{},s=jn().settings(t),c,u=S=>{r=n.scale().domain(),c=qn().settings(t).maxHeight(r.length*Zn+Jn).on("resize",()=>d(S)),c(S),s(S),d(S)},d=S=>{y(S),m(S),p(S),Gn(S)},m=S=>{let v=x(S);v.style("display",a<=1?"none":"block"),v.select("#page-text").text(`${i+1}/${a}`),v.select("#up-arrow").attr("class",i===0?"disabled":"").on("click",()=>{i>0&&(h(i-1),d(S))}),v.select("#down-arrow").attr("class",i>=a-1?"disabled":"").on("click",()=>{i<a-1&&(h(i+1),d(S))})},p=S=>{a>1&&n.cellFilter(f()),S.select("g.legendCells").remove();let v=b(S);v.call(n);let w=S.select("g.legendCells").node().getBBox();v.attr("height",w.height+Jn),l(S)},h=S=>{i=S,t.legend={...t.legend,pageIndex:i}},f=()=>(S,v)=>v>=o*i&&v<o*i+o,y=S=>{let v=S.node().getBoundingClientRect(),w=Math.floor(v.height/Zn)-1;o=w<r.length?w-1:w,a=g(w),i=Math.min(i,a-1)},g=S=>Math.ceil(r.length/S),x=S=>O(S,".legend-controls",()=>S.append("g").attr("class","legend-controls").html(In)),b=S=>O(S,".legend",()=>S.append("svg").attr("class","legend"));return u.decorate=(...S)=>S.length?(l=S[0],u):l,_o(u,n),u};var er=e=>Zt(St.legendColor().shape("circle").shapeRadius(6),e),Co=e=>Zt(St.legendSymbol().shapePadding(1).labelOffset(3),e),E=()=>Jt(er),qe=()=>Jt(Co,nr),tr=()=>Jt(er,nr);function nr(e){if(!e)return null;let t=e.domain(),n=e.range().map(r=>xt.symbol().type(r)());return xt.scaleOrdinal().domain(t).range(n)}function Jt(e,t=void 0){let n={},r=null,a=null,o=i=>{if(r&&r.range().length>1){let l=e(n);l.scale(r).orient("vertical").on("cellclick",function(c){let u=this.__data__;n.hideKeys=n.hideKeys||[],n.hideKeys.includes(u)?n.hideKeys=n.hideKeys.filter(d=>d!==u):n.hideKeys.push(u),Pe(this)._draw()}),l.labels(c=>{let u=String(c.domain[c.i]).split("|");return n.mainValues.length<=1&&u.length>1?u.slice(0,u.length-1).join("|"):c.domain[c.i]});let s=O(i,"div.legend-container",()=>i.append("div"));l.decorate(c=>{let u=m=>n.hideKeys&&n.hideKeys.includes(m),d=c.select("g.legendCells").attr("transform","translate(20,20)").selectAll("g.cell");d.classed("hidden",u),d.append("title").html(m=>m),a&&d.select("circle, path").style("fill",m=>u(m)?null:a(m)).style("stroke",m=>u(m)?null:ne(a(m)))}),s.attr("class","legend-container").attr("borderbox-on-hover",!0).style("z-index","2").call(l)}};return o.settings=(...i)=>i.length===0?n:(n=i[0],o),o.scale=(...i)=>i.length?(r=t?t(i[0]):i[0],o):r,o.color=(...i)=>i.length?(a=i[0],o):a,o}function q(e,t=void 0){let n=t||e.data;return(e.hideKeys?.length??0)>0?n.map(a=>{let o={...a};return e.hideKeys.forEach(i=>{delete o[i]}),o}):n}function Re(e){let t=e.data,n=e.hideKeys?.length??0,r=e.splitValues.length;return n>0?r===0?t.filter(a=>Object.values(a).reduce((o,i)=>o&&!e.hideKeys.includes(i),!0)):t.map(a=>{let o=Object.entries(a).filter(([i,l])=>!e.hideKeys.includes(fe(i)));return Object.fromEntries(o)}):t}import*as xe from"d3fc/index.js";var Ao=e=>(t,n)=>t.style("stroke-width",r=>"1.0").style("stroke",r=>Qt(r,e));function Qt(e,t){return e===0?t?t.textStyles.color:"#666":t?t.colorStyles.grid.gridLineColor:"#bbb"}var To=e=>(t,n)=>{t.strokeStyle=Qt(n,e),t.lineWidth=1},Lo=(e,t)=>e.style("display","none"),Do=e=>(t,n)=>{t.lineWidth=1,t.strokeStyle=Qt(n,e)},P=(e,t)=>{let n="both",r=!1,a=null,o=null,i=null,l=xe.seriesSvgMulti(),s=xe.annotationSvgGridline(),c=Ao(t),u=Lo,d=function(...m){r&&(l=xe.seriesCanvasMulti().context(i),s=xe.annotationCanvasGridline(),c=To(t),u=Do(t));let p=l.xScale(a).yScale(o),h=n==="vertical"?u:c,f=n==="horizontal"?u:c,y=s.xDecorate(h).yDecorate(f);return p.series([y,e])(...m)};return d.orient=(...m)=>m.length?(n=m[0],d):n,d.canvas=(...m)=>m.length?(r=m[0],d):r,d.xScale=(...m)=>m.length?(a=m[0],d):a,d.yScale=(...m)=>m.length?(o=m[0],d):o,d.context=(...m)=>m.length?(i=m[0],d):i,d};import*as rr from"d3fc/index.js";var R=()=>{let e=it(),t=n=>{let r=e.pad(),a=e.padUnit(),o=1;switch(a){case"domain":break;case"percent":{o=n[1]-n[0];break}default:throw new Error("Unknown padUnit: "+a)}let i=n[0]-r[0]*o,l=n[1]+r[1]*o;return n[0]=n[0]>=0&&i<0?0:i,n[1]=n[1]<=0&&l>0?0:l,n};return t.pad=function(...n){return e.pad()},t.padUnit=function(...n){return e.padUnit()},rr.rebindAll(t,e),t};import*as Be from"d3";var ar=`<button id="zoom-reset">Reset zoom</button>
<button id="one-year">1 Year</button>
<button id="six-months">6 Months</button>
<button id="one-month">1 Month</button>
`;var F=()=>{let e=null,t=null,n=null,r=null,a=null,o=null,i=!1,l=!1,s=()=>{};function c(p){let h=`d3fc-${l?"canvas":"svg"}.plot-area`;if(n||a){let f=r&&r.domain()[0]instanceof Date,y=Be.zoom().on("zoom",x=>{let{transform:b}=x;t.zoom={k:b.k,x:b.x,y:b.y},u(b),p.call(e);let S=b.k===1&&b.x===0&&b.y===0,v=d(p).style("display",S?"none":"");v.select("#zoom-reset").on("click",()=>p.select(h).call(y.transform,Be.zoomIdentity));let w=v.select("#one-year").style("display",f?"":"none"),T=v.select("#six-months").style("display",f?"":"none"),H=v.select("#one-month").style("display",f?"":"none");if(f){let W=z=>()=>{let N=new Date(n.domain()[0]),$=new Date(N);z(N,$);let M=r.range(),I=(M[1]-M[0])/(r($)-r(N)),_=-r(N)*I,L=0;if(a){let j=a.domain().reduce((G,Z)=>G+Z)/2;L=-o(j)*I+a(j)}p.select(h).call(y.transform,Be.zoomIdentity.translate(_,L).scale(I))};w.on("click",W((z,N)=>N.setYear(z.getFullYear()+1))),T.on("click",W((z,N)=>N.setMonth(z.getMonth()+6))),H.on("click",W((z,N)=>N.setMonth(z.getMonth()+1)))}}),g=e.decorate();e.decorate((x,b)=>{if(g(x,b),!i){i=!0;let S=x.select(h),v=l?window.devicePixelRatio:1;S.on("measure.zoom-range",w=>{if(r&&r.range([0,w.detail.width/v]),o&&o.range([0,w.detail.height/v]),t.zoom){let T=Be.zoomIdentity.translate(t.zoom.x,t.zoom.y).scale(t.zoom.k);S.call(y.transform,T)}}).call(y)}})}p.call(e)}c.chart=(...p)=>p.length?(e=p[0],c):e,c.settings=(...p)=>p.length?(t=p[0],c):t,c.xScale=(...p)=>p.length?(n=m(p[0]),r=n?n.copy():null,c):n,c.yScale=(...p)=>{if(!p.length)return a;if(a=m(p[0]),o=a?a.copy():null,o){let h=o.domain();o.domain([h[1],h[0]])}return c},c.canvas=(...p)=>p.length?(l=p[0],c):l,c.onChange=(...p)=>p.length?(s=p[0],c):s;let u=p=>{let h={...p};if(n&&(n.domain(p.rescaleX(r).domain()),h.xDomain=n.domain()),a){let f=p.rescaleY(o).domain();a.domain([f[1],f[0]]),h.yDomain=a.domain()}s(h)},d=p=>O(p,".zoom-controls",()=>p.append("div").attr("class","zoom-controls").style("display","none").html(ar)),m=p=>p&&p.nice?p:null;return c};function ir(e,t){let n=yt(t,q(t)),r=te(t),a=E().settings(t).scale(r),o=ht(t,r).orient("horizontal"),i=or.seriesSvgMulti().mapping((d,m)=>d[m]).series(n.map(()=>o)),l=A(t).settingName("mainValues").valueName("mainValue").memoValue(t.axisMemo[0]).excludeType(C.ordinal).include([0]).paddingStrategy(R())(n),s=A(t).excludeType(C.linear).settingName("crossValues").valueName("crossValue").orient("vertical")(n),c=K(l,s).plotArea(P(i,t).orient("horizontal"));c.yPaddingInner&&(c.yPaddingInner(.5),c.yPaddingOuter(.25),o.align("left")),c.xNice&&c.xNice();let u=F().chart(c).settings(t).yScale(s.scale);e.datum(n).call(u),e.call(a)}ir.plugin={name:"X Bar",category:"X Chart",max_cells:1e3,max_columns:50,render_warning:!0,initial:{names:["X Axis"]}};var lr=ir;import*as fr from"d3fc/index.js";var mr=(e,t)=>{if(!sr(e)||!sr(t))return;let n=cr(e),r=cr(t);n>r?t[0]=ur(t,n):e[0]=ur(e,r)},sr=e=>e.length===2&&!isNaN(e[0])&&!isNaN(e[1])&&e[0]!==e[1],cr=e=>(0-e[0])/(e[1]-e[0]),ur=(e,t)=>t*e[1]/(t-1);import*as pr from"d3fc/index.js";var dr=e=>{let t=[],n=!1,r,a=i=>{i.text("");let l=pr.dataJoin("span","splitter-label").key(u=>u),s=!n&&t.length===1,c=r&&e.splitValues.length===0;l(i,t).classed("disabled",s).text(u=>u.name).style("color",u=>c?ne(r(u.name)):void 0).on("click",(u,d)=>{s||(n?e.splitMainValues=e.splitMainValues.filter(m=>m!=d.name):e.splitMainValues=[d.name].concat(e.splitMainValues||[]),u.target.getRootNode().host.closest("perspective-viewer")?.dispatchEvent(new Event("perspective-config-update")),o(i))})},o=i=>{let l=Pe(i.node());l._container.innerHTML="",l._draw()};return a.labels=(...i)=>i.length?(t=i[0],a):t,a.alt=(...i)=>i.length?(n=i[0],a):n,a.color=(...i)=>i.length?(r=i[0],a):r,a};var Se=(e,t,n=No)=>{let r,a,o,i=e.splitMainValues||[],l=u=>{let d=u.split("|");return i.includes(d[d.length-1])},s=e.mainValues.some(u=>l(u.name));a=s?n(t,u=>!l(u)):t,o=s?n(t,l):null;let c=u=>{if(e.mainValues.length===1)return;let d=e.mainValues.map((f,y)=>({index:y,name:f.name})),m=d.filter(f=>!l(f.name)),p=d.filter(f=>l(f.name)),h=()=>dr(e).color(r);u.select(".y-label.left-label").call(h().labels(m)),u.select(".y-label.right-label").call(h().labels(p).alt(!0))};return c.color=(...u)=>u.length?(r=u[0],c):r,c.haveSplit=()=>s,c.data=(...u)=>u.length?(a=u[0],c):a,c.altData=(...u)=>u.length?(o=u[0],c):o,c},No=(e,t)=>e.map(n=>n.filter(r=>t(r.key))),en=(e,t)=>e.map(n=>t(n.key)?n:n.map(r=>Object.assign({},r,{mainValue:null}))),hr=(e,t)=>e.map(n=>en(n,t));function gr(e,t){let n=yt(t,q(t)),r=te(t),a=E().settings(t).scale(r),o=ht(t,r).orient("vertical"),i=fr.seriesSvgMulti().mapping((f,y)=>f[y]).series(n.map(()=>o)),l=A(t).excludeType(C.linear).settingName("crossValues").valueName("crossValue")(n),s=A(t).settingName("mainValues").valueName("mainValue").memoValue(t.axisMemo[1]).excludeType(C.ordinal).orient("vertical").include([0]).paddingStrategy(R()),c=t.mainValues.length>1?hr:en,u=Se(t,n,c).color(r),d=s(u.data()),m=u.haveSplit()?i:P(i,t).orient("vertical"),p=K(l,d).axisSplitter(u).plotArea(m);p.xPaddingInner&&(p.xPaddingInner(.5),p.xPaddingOuter(.25),o.align("left")),p.yNice&&p.yNice();let h=F().chart(p).settings(t).xScale(l.scale);if(u.haveSplit()){let f=s(u.altData());mr(d.domain,f.domain),p.yDomain(d.domain).altAxis(f)}e.datum(u.data()).call(h),e.call(a)}gr.plugin={name:"Y Bar",category:"Y Chart",max_cells:1e3,max_columns:50,render_warning:!0,initial:{names:["Y Axis"]}};var yr=gr;import*as br from"d3fc/index.js";import*as xr from"d3fc/index.js";function He(e,t){let n=xr.seriesSvgLine(),r=e.data.length*(e.data?.length>0?Object.keys(e.data[0]).length-(e.crossValues?.length>0?1:0):0),a=Math.max(1,Math.min(3,Math.floor(e.size.width/r/2)));return n=n.decorate(o=>{o.style("stroke",i=>ne(t(i[0]&&i[0].key))).style("stroke-width",a)}),n.crossValue(o=>o.crossValue).mainValue(o=>o.mainValue)}function Sr(e,t){let n=X(e);return t.map((r,a)=>Object.keys(r).filter(o=>o!=="__ROW_PATH__").map(o=>({key:o,crossValue:n(r,a),mainValue:r[o],row:r})))}var bt=function(e){let t=[];for(let n of e)for(let r=0;r<n.length;r++)n[r].mainValue!==null&&(t[r]=t[r]||[],t[r].push(n[r]));return t};import*as vt from"d3fc/index.js";var tn=(e,t,n=Math.min)=>{let r=i=>i.reduce((l,s)=>{let c=a(s);return c&&(!l||n(l.value,c.value)===c.value)?c:l},null),a=i=>{if(Array.isArray(i))return r(i);let l=t(i);return l!==null?{item:i,value:l}:null},o=r(e);return o?o.item:null};var Y=()=>{let e=he().alwaysShow(!0),t=null,n=null,r=null,a=null,o=!1,i=null,l="crossValue",s="mainValue",c=null,u=1,d=h=>{let f=`d3fc-${o?"canvas":"svg"}.plot-area`;if(t||n){let y=null,g=vt.pointer().on("point",x=>{let b=x.length?p(x[0]):null;y=b?[b.data]:[];let S=b?b.scale:n;m(h,y,S)});h.select(f).on("measure.nearbyTip",()=>m(h,[])).on("click",()=>{y.length&&Ke(h.node(),y[0],e.settings())}).call(g)}},m=(h,f,y=n)=>{let g=h.select("d3fc-svg.plot-area svg").selectAll("circle.nearbyTip").data(f);g.exit().remove(),g.enter().append("circle").attr("class","nearbyTip").merge(g).attr("r",x=>a?u*Math.sqrt(a(x.size)):10).attr("transform",x=>`translate(${t(x[l])},${y(x[s])})`).style("stroke","none").style("fill",x=>r&&x.key&&Ae(r(x.key))),e(g)},p=h=>{let f=x=>b=>b[s]===void 0||b[s]===null||b[l]===void 0||b[l]===null?null:Math.sqrt(Math.pow(t(b[l])-h.x,2)+Math.pow(x(b[s])-h.y,2)),y=f(n),g=tn(i,y,Math.min);if(c){let x=f(c.yScale),b=tn(c.data,x,Math.min);return y(g)<=x(b)?{data:g,scale:n}:{data:b,scale:c.yScale}}return{data:g,scale:n}};return d.scaleFactor=(...h)=>h.length?(u=h[0],d):u,d.xScale=(...h)=>h.length?(t=h[0],d):t,d.yScale=(...h)=>h.length?(n=h[0],d):n,d.color=(...h)=>h.length?(r=h[0],d):r,d.size=(...h)=>h.length?(a=h[0]?h[0].copy().range([40,4e3]):null,d):a,d.canvas=(...h)=>h.length?(o=h[0],d):o,d.data=(...h)=>h.length?(i=h[0],d):i,d.xValueName=(...h)=>h.length?(l=h[0],d):l,d.yValueName=(...h)=>h.length?(s=h[0],d):s,d.altDataWithScale=(...h)=>h.length?(c=h[0],d):c,d.settings=(...h)=>h.length?(e.settings(h[0]),d):e.settings(),vt.rebindAll(d,e),d};function vr(e,t){let n=Sr(t,q(t)),r=te(t),a=E().settings(t).scale(r),o=br.seriesSvgRepeat().series(He(t,r)).orient("horizontal"),i=R().pad([.1,.1]).padUnit("percent"),l=Se(t,bt(n)).color(r),s=A(t).excludeType(C.linear).settingName("crossValues").valueName("crossValue")(n),c=A(t).settingName("mainValues").valueName("mainValue").memoValue(l.haveSplit()?null:t.axisMemo[0]).orient("vertical").paddingStrategy(i),u=c(l.data()),d=P(o,t).orient("vertical"),m=K(s,u).axisSplitter(l).plotArea(d);m.yNice&&m.yNice();let p=F().chart(m).settings(t).xScale(s.scale),h=Y().settings(t).xScale(s.scale).yScale(u.scale).color(r).data(n);if(l.haveSplit()){let y=c(l.altData());m.altAxis(y),h.data(l.data()).altDataWithScale({yScale:y.scale,data:l.altData()})}let f=l.data();e.datum(f).call(p),e.call(h),e.call(a)}vr.plugin={name:"Y Line",category:"Y Chart",max_cells:4e3,max_columns:50,render_warning:!0,initial:{names:["Y Axis"]}};var Vr=vr;import*as Tr from"d3fc/index.js";import{seriesCanvasPoint as Oo}from"d3fc/index.js";import*as D from"d3";var nn=Math.sqrt(3),Mo={draw:function(e,t){let n=Math.sqrt(t/(nn*3));e.moveTo(0,n*2),e.lineTo(-nn*n,-n),e.lineTo(nn*n,-n),e.closePath()}},zo=[D.symbolCircle,D.symbolCross,D.symbolDiamond,D.symbolSquare,D.symbolStar,D.symbolTriangle,D.symbolWye],rn={circle:D.symbolCircle,square:D.symbolSquare,cross:D.symbolCross,diamond:D.symbolDiamond,star:D.symbolStar,triangle:D.symbolTriangle,wye:D.symbolWye,nabla:Mo};function Ze(e){return e.length>1?D.scaleOrdinal().domain(e).range(zo):null}var Po=8,Fo=1;function wr(e,t,n,r,a,o,i=1){let l=Oo().crossValue(s=>s.x).mainValue(s=>s.y);return o&&l.type(s=>o(s.row[t])),n&&l.size(s=>Math.round(i*n(s.size))),l.decorate((s,c)=>{let u=r(c.colorValue),d=e.colorStyles?.opacity;if(a){let{type:m}=e.mainValues.find(h=>h.name===a),p=oe(m,c.row[a]);if(p!==null){s.fillStyle=e.textStyles.color,s.font=e.textStyles.font;let h=0;n&&(h=Math.sqrt(i*n(c.size)/Math.PI)*Fo);let f=h+Po;s.fillText(p,f,4)}}s.strokeStyle=ne(u),s.fillStyle=Ae(u,d)}),l}function _r(e,t){let n=[...new Set(ft(e,t))];return Ze(n)}function Cr(e){let t=e.data&&e.data.length>0?e.data[0]:{},n=[];return Object.keys(t).forEach(r=>{if(r!=="__ROW_PATH__"){let a=fe(r);n.includes(a)||n.push(a)}}),Ze(n)}function Ar(e,t){let n=e.mainValues.length;return t.map(r=>{let a=Object.keys(r).filter(i=>i!=="__ROW_PATH__"),o=new Array(a.length/n);for(let i=0;i<a.length/n;i++)o[i]={key:fe(a[i*n]),crossValue:r[a[i*n]],mainValue:r[a[i*n+1]],row:r};return o})}function Lr(e,t){let n=bt(Ar(t,Re(t))),r=Bn(t),a=Cr(t),o=null;r.domain().length>=2&&(o=tr().settings(t).scale(a).color(r));let i=Tr.seriesSvgRepeat().series(He(t,r)).orient("horizontal"),l=R().pad([.1,.1]).padUnit("percent"),s=A(t).settingName("mainValues").settingValue(t.mainValues[0].name).valueName("crossValue").memoValue(t.axisMemo[0]).paddingStrategy(l),u=A(t).settingName("mainValues").settingValue(t.mainValues[1].name).valueName("mainValue").memoValue(t.axisMemo[1]).orient("vertical").paddingStrategy(l)(n),d=s(n),m=P(i,t).orient("vertical"),p=K(d,u).xLabel(t.mainValues[0].name).yLabel(t.mainValues[1].name).plotArea(m);p.xNice&&p.xNice(),p.yNice&&p.yNice();let h=F().chart(p).settings(t).xScale(d.scale).yScale(u.scale),f=Y().settings(t).xScale(d.scale).yScale(u.scale).color(r).data(n);e.datum(n).call(h),e.call(f),o&&e.call(o)}Lr.plugin={name:"X/Y Line",category:"X/Y Chart",max_cells:5e4,max_columns:50,render_warning:!0,initial:{type:"number",count:2,names:["X Axis","Y Axis","Tooltip"]},selectMode:"toggle"};var Dr=Lr;import*as Je from"d3fc/index.js";import*as kr from"d3fc/index.js";function Nr(e,t){let n=kr.seriesSvgArea();return n=n.decorate(r=>{r.style("fill",a=>t(a[0].key)).style("opacity",.5)}),n.crossValue(r=>r.crossValue).mainValue(r=>r.mainValue).baseValue(r=>r.baseValue)}function Mr(e,t){let n=X(e);return t.map((r,a)=>{let o={};return Object.keys(r).filter(i=>i!=="__ROW_PATH__").map(i=>{let l=i.split("|"),s=l[l.length-1],c=o[s]||0,u=c+r[i];return o[s]=u,{key:i,crossValue:n(r,a),mainValue:u,baseValue:c,row:r}})})}function zr(e,t){let n=Mr(t,q(t)),r=te(t),a=E().settings(t).scale(r),o=Je.seriesSvgRepeat().series(Nr(t,r).orient("vertical")),i=Je.seriesSvgRepeat().series(He(t,r)).orient("vertical"),l=Je.seriesSvgMulti().series([o,i]),s=A(t).excludeType(C.linear).settingName("crossValues").valueName("crossValue")(n),c=A(t).settingName("mainValues").valueName("mainValue").memoValue(t.axisMemo[1]).excludeType(C.ordinal).orient("vertical").include([0]).paddingStrategy(R()),u=Se(t,n).color(r),d=c(u.data()),m=u.haveSplit()?l:P(l,t).orient("vertical"),p=K(s,d).axisSplitter(u).plotArea(m);p.yNice&&p.yNice();let h=F().chart(p).settings(t).xScale(s.scale),f=Y().settings(t).xScale(s.scale).yScale(d.scale).color(r).data(n);if(u.haveSplit()){let y=c(u.altData());p.altAxis(y),f.data(u.data()).altDataWithScale({yScale:y.scale,data:u.altData()})}e.datum(u.data()).call(h),e.call(f),e.call(a)}zr.plugin={name:"Y Area",category:"Y Chart",max_cells:4e3,max_columns:50,render_warning:!0,initial:{names:["Y Axis"]}};var Or=zr;import*as Rr from"d3fc/index.js";import*as Pr from"d3fc/index.js";function Fr(e,t,n,r){let a=Pr.seriesSvgPoint().size(100),o=e.colorStyles&&e.colorStyles.opacity;return r&&a.type(r(t)),a.decorate(i=>{i.style("stroke",l=>ne(n(l.colorValue||t))).style("fill",l=>Ae(n(l.colorValue||t),o))}),a.crossValue(i=>i.crossValue).mainValue(i=>i.mainValue)}function Er(e){let t=e.data&&e.data.length>0?e.data[0]:{},n=Object.keys(t).filter(r=>r!=="__ROW_PATH__");return Ze(n)}function Br(e,t){let n=Hn(t,q(t)),r=Er(t),a=te(t),o=qe().settings(t).scale(r).color(a),i=Rr.seriesSvgMulti().mapping((y,g)=>y[g]).series(n.map(y=>Fr(t,y.key,a,r))),l=R().pad([.05,.05]).padUnit("percent"),s=A(t).excludeType(C.linear).settingName("crossValues").valueName("crossValue")(n),c=A(t).settingName("mainValues").valueName("mainValue").memoValue(t.axisMemo[1]).orient("vertical").paddingStrategy(l),u=Se(t,n).color(a),d=c(u.data()),m=u.haveSplit()?i:P(i,t).orient("vertical"),p=K(s,d).axisSplitter(u).plotArea(m);p.yNice&&p.yNice();let h=F().chart(p).settings(t).xScale(s.scale),f=Y().settings(t).xScale(s.scale).yScale(d.scale).color(a).data(n);if(u.haveSplit()){let y=c(u.altData());p.altAxis(y),f.data(u.data()).altDataWithScale({yScale:y.scale,data:u.altData()})}e.datum(u.data()).call(h),e.call(f),o&&e.call(o)}Br.plugin={name:"Y Scatter",category:"Y Chart",max_cells:4e3,max_columns:50,render_warning:!0,initial:{names:["Y Axis"]}};var Hr=Br;import*as Qe from"d3";function $r(e,t){return Le(e,t,{excludeEmpty:!0}).map(n=>Eo(e,n))}function Eo(e,t){let n=X(e),r=t.map((a,o)=>({crossValue:n(a,o),mainValues:e.mainValues.map(i=>a[i.name]),x:a[e.mainValues[0].name],y:a[e.mainValues[1].name],colorValue:e.realValues[2]?a[e.realValues[2]]:void 0,size:e.realValues[3]?a[e.realValues[3]]:void 0,key:t.key,row:a}));return r.key=t.key,r}import*as $e from"d3";function Ir(e,t,n,r){return $e.scaleLinear().domain(Gr(t,n,r))}function be(e,t,n,r=null){let a=Gr(t,n,r),o=e.colorStyles.gradient.full;if(a[0]>=0)o=e.colorStyles.gradient.positive;else if(a[1]<=0)o=e.colorStyles.gradient.negative;else{let l=Math.max(-a[0],a[1]);a=[-l,l]}let i=Ro(o);return $e.scaleSequential(i).domain(a)}var Gr=(e,t,n)=>n||$t().valueName(t).pad([0,0])(e),Ro=e=>{let t=e.slice(1).map((n,r)=>$e.interpolate(e[r][1],n[1]));return n=>{let r=e.findIndex((l,s)=>s<e.length-1&&n<=e[s+1][0]&&n>l[0]);if(r===-1)return n<=e[0][0]?e[0][1]:e[e.length-1][1];let a=t[r],[o]=e[r],[i]=e[r+1];return a((n-o)/(i-o))}};import*as Ie from"d3";import*as ve from"d3fc/index.js";function Ve(){let e=null;function t(n){let r=O(n,"div.legend-container",()=>n.append("div").attr("class","legend-container legend-color").style("z-index","2")),{width:a,height:o}=r.node().getBoundingClientRect(),i=Ie.scaleBand().domain([0,1]).range([0,a]),l=e.copy().nice().domain(),s=ve.extentLinear().pad([.1,.1]).padUnit("percent")(l),[c,u]=s,d=Ie.range(c,u,(u-c)/o),m=Ie.scaleLinear().domain(s).range([o,0]),p=ve.autoBandwidth(ve.seriesSvgBar()).xScale(i).yScale(m).crossValue(0).baseValue((v,w)=>d[Math.max(0,w-1)]).mainValue(v=>v).decorate(v=>{v.selectAll("path").style("fill",w=>e(w))}),h=l[0]<0&&l[1]>0?0:Math.round((l[1]+l[0])/2),f=[...l,h],y=st(c,u),g=ve.axisRight(m).tickValues(f).tickSizeOuter(0).tickFormat(v=>y(v)),x=O(r,"svg",()=>r.append("svg")).style("width",a).style("height",o),b=O(x,"g",()=>x.append("g")).datum(d).call(p),S=Math.abs(b.node().getBBox().x);O(x,"#legend-axis",()=>x.append("g").attr("id","legend-axis")).attr("transform",`translate(${S})`).datum(d).call(g).select(".domain").attr("visibility","hidden")}return t.scale=(...n)=>n.length?(e=n[0],t):e,t}function Ge(){let e="element-prefix-unset",t=null,n=null,r=null,a=null,o=null,i=null,l=!0,s=null,c=u=>{let d=O(u,"div.outer-container",()=>u.append("div").attr("class","outer-container").style("width",`calc(100% - ${s??0})`).style("height",`calc(100% - ${s??0})`).style("padding-left",s??0)),m=O(d,"div.inner-container",()=>d.append("div").attr("class","inner-container")),p=d.node().getBoundingClientRect(),h=p.height,f=p.width-(o?70:0),y=300,g=u.datum(),x=Math.max(1,Math.min(g.length,Math.floor(f/y))),b=Math.ceil(g.length/x);i={width:f/Math.max(x,1),height:Math.min(h,Math.max(h/b,f/Math.max(x,1)))},h/b>i.height*.75&&(i.height=h/b),g.length>1?(m.style("grid-template-columns",`repeat(${x}, ${100/x}%)`),m.style("grid-template-rows",`repeat(${b}, ${i.height}px)`)):(m.style("grid-template-columns","repeat(1, 100%)"),m.style("grid-template-rows","repeat(1, 100%)")),r=m.selectAll(`div.${e}-container`).data(g,S=>S.split),r.exit().remove(),n=r.enter().append("div").attr("class",`${e}-container`),a=n.append("div").attr("class","title-container").style("text-align","center").attr("display","inline-block").append("text").attr("class","title").style("text-align","left"),l?t=n.append("svg").append("g").attr("class",e):t=n.append("div").attr("class",e)};return c.padding=(...u)=>u.length?(s=u[0],c):s,c.svg=(...u)=>u.length?(l=u[0],c):l,c.elementsPrefix=(...u)=>u.length?(e=u[0],c):e,c.chartContainer=()=>t,c.chartEnter=()=>n,c.chartDiv=()=>r,c.chartTitle=()=>a,c.containerSize=()=>i,c}import*as Wr from"d3fc/index.js";function Bo([e,t],[n,r]){let a=(r-t)/(n-e),o=r-a*n;return function(i){let l=i.node(),s=Math.min(l.clientWidth,l.clientHeight);return Math.min(r,Math.max(t,a*s+o))}}function Vt(){let e=null,t=null,n=null,r=null,a=o=>{let l=!!e.realValues[2],s=e.realValues[4],c=e.realValues[3]?Ir(e,t,"size").range([10,1e4]):null,u=e.realValues[5],d=Bo([600,.1],[1600,1])(o),m=Wr.seriesCanvasMulti().mapping((v,w)=>v[w]).series(t.map(()=>wr(e,s,c,n,u,r,d))),p=()=>A(e).settingName("mainValues").paddingStrategy(R()).pad([.1,.1]),h=p().settingValue(e.mainValues[0].name).memoValue(e.axisMemo[0]).valueName("x")(t),f=p().orient("vertical").settingValue(e.mainValues[1].name).memoValue(e.axisMemo[1]).valueName("y")(t),[y,g]=e.splitValues.length===0?[e.mainValues[0].name,e.mainValues[1].name]:["",""],x=Ee(h,f).xLabel(y).yLabel(g).plotArea(P(m,e).canvas(!0));x.xNice&&x.xNice(),x.yNice&&x.yNice();let b=F().chart(x).settings(e).xScale(h.scale).yScale(f.scale).canvas(!0),S=Y().scaleFactor(d).settings(e).canvas(!0).xScale(h.scale).xValueName("x").yValueName("y").yScale(f.scale).color(!l&&n).size(c).data(t);o.datum(t).call(b),o.call(S)};return a.settings=(...o)=>o.length?(e=o[0],a):e,a.data=(...o)=>o.length?(t=o[0],a):t,a.color=(...o)=>o.length?(n=o[0],a):n,a.symbols=(...o)=>o.length?(r=o[0],a):r,a}function Ho(e,t){if(!t)return;let n=e.realValues[4],r=e.mainValues.find(s=>s.name===n)?.type,a=t.domain(),o=t.range(),i=o.length;for(let[s,c]of a.entries())o[s]=o[s%i];let l=e.columns_config?.[n]?.symbols??{};return Object.entries(l).forEach(([s,c])=>{let u=rn[c]??Qe.symbolCircle,d=a.findIndex(m=>{switch(r){case"date":case"datetime":return new Date(m).valueOf()===new Date(s).valueOf();default:return String(m)===String(s)}});o[d]=u}),t.range(o),t}function wt(e,t){let n=t.realValues[2],r=!!n,a=t.mainValues.find(d=>d.name===n)?.type==="string",o=null,i=null,l=t.realValues[4],s=_r(t,l),c=Ho(t,s),u=$r(t,Re(t));if(r&&a?l?(t.splitValues.length>0?o=Ce(t,u):o=Ce(t,u[0]),i=qe().settings(t).scale(c)):(o=Rn(t,n),i=E().settings(t).scale(o)):r?(o=be(t,u,"colorValue"),i=Ve().scale(o)):(o=J().settings(t).domain([""])(),i=qe().settings(t).scale(c)),t.splitValues.length!==0){let d=Ge().svg(!1).elementsPrefix("xy-scatter");d=d.padding("2.5em"),e.append("div").attr("class","multi-xlabel").append("p").text(t.mainValues[0].name),e.append("div").attr("class","multi-ylabel").append("p").text(t.mainValues[1].name).style("transform","rotate(-90deg)").style("text-wrap","nowrap"),e=e.datum(u),e.call(d);let h=d.chartContainer(),f=d.chartEnter(),y=d.chartDiv(),g=d.chartTitle(),x=d.containerSize();g.each((b,S,v)=>Qe.select(v[S]).text(b.key)),f.merge(y).attr("transform",`translate(${x.width/2}, ${x.height/2})`).each(function(b){let S=Qe.select(this);Vt().settings(t).data([b]).color(o).symbols(c)(S)})}else Vt().settings(t).data(u).color(o).symbols(c)(e);i&&e.call(i)}wt.plugin={name:"X/Y Scatter",category:"X/Y Chart",max_cells:5e4,max_columns:50,render_warning:!0,initial:{type:"number",count:2,names:["X Axis","Y Axis","Color","Size","Symbol","Label","Tooltip"]},selectMode:"toggle"};wt.can_render_column_styles=(e,t)=>e==="string"&&t==="Symbol";wt.column_style_controls=(e,t)=>e==="string"&&t==="Symbol"?{symbols:{keys:"row",values:Object.keys(rn)}}:null;var jr=wt;import*as _t from"d3fc/index.js";function Yr(e,t){let n=_t.seriesCanvasHeatmap();return n.decorate((r,a)=>{r.fillStyle=t(a.colorValue)}),_t.autoBandwidth(n).xValue(r=>r.crossValue).yValue(r=>r.mainValue).colorValue(r=>r.colorValue).colorInterpolate(t.interpolator()).widthFraction(1)}function Ur(e,t){let n=X(e),r=Oe(e).excludeType(C.linear).settingName("splitValues")(),a=[];return t.forEach((o,i)=>{let l=n(o,i);Object.keys(o).filter(s=>s!=="__ROW_PATH__").forEach(s=>{let c=$o(s);a.push({crossValue:l,mainValue:r===C.time?new Date(c):c,colorValue:o[s],row:o})})}),a}function $o(e){let t=e.split("|");return t.pop(),t.join("|")}function Kr(e,t){let n=Ur(t,q(t)),r=be(t,n,"colorValue"),a=Yr(t,r),o=Ve().scale(r),i=A(t).excludeType(C.linear).settingName("crossValues").valueName("crossValue")(n),l=A(t).excludeType(C.linear).settingName("splitValues").valueName("mainValue").modifyDomain(d=>!isNaN(d[0])?d.reverse():d).orient("vertical")(n),s=Ee(i,l).plotArea(P(a,t).canvas(!0));s.xPaddingInner&&(s.xPaddingInner(0),s.xPaddingOuter(0),a.xAlign("right")),s.yPaddingInner&&(s.yPaddingInner(0),s.yPaddingOuter(0),a.yAlign("top"));let c=F().chart(s).settings(t).xScale(i.scale).yScale(l.scale).canvas(!0),u=Y().settings(t).canvas(!0).xScale(i.scale).yScale(l.scale).color(r).data(n);e.datum(n).call(c),e.call(o),e.call(u)}Kr.plugin={name:"Heatmap",category:"Hierarchial Chart",max_cells:5e4,max_columns:500,render_warning:!0,initial:{names:["Color"]}};var Xr=Kr;import{seriesCanvasOhlc as jo}from"d3fc/index.js";import*as Ct from"d3fc/index.js";function qr(e,t){return Le(e,t,{excludeEmpty:!0}).map(n=>Io(e,n))}function Io(e,t){let n=X(e),r=o=>t[o<t.length-1?o+1:o][e.realValues[0]],a=t.map((o,i)=>{let l=e.realValues[0]?o[e.realValues[0]]:void 0,s=e.realValues[1]?o[e.realValues[1]]:r(i);return{crossValue:n(o,i),mainValues:e.mainValues.map(c=>o[c.name]),openValue:l,closeValue:s,highValue:e.realValues[2]?o[e.realValues[2]]:Math.max(l,s),lowValue:e.realValues[3]?o[e.realValues[3]]:Math.min(l,s),key:t.key,row:o}});return a.key=t.key,a}import*as We from"d3fc/index.js";var Go=e=>e.closeValue>=e.openValue;function Zr(e,t,n){let r=n.domain(),a=J().domain(r).settings(e).defaultColors([e.colorStyles["series-2"]]).mapFunction(Te(.5))(),o=J().settings(e).domain(r)(),i=t().crossValue(c=>c.crossValue).openValue(c=>c.openValue).highValue(c=>c.highValue).lowValue(c=>c.lowValue).closeValue(c=>c.closeValue).decorate((c,u)=>{let d=Go(u)?n(u.key):a(u.key);c.fillStyle=d,c.strokeStyle=d}),l=We.seriesCanvasLine().mainValue(c=>c.bollinger.average).crossValue(c=>c.crossValue).decorate((c,u)=>{c.strokeStyle=o(u[0].key)}),s=We.seriesCanvasArea().mainValue(c=>c.bollinger.upper).baseValue(c=>c.bollinger.lower).crossValue(c=>c.crossValue).decorate((c,u)=>{c.fillStyle=Te(.25)(o(u[0].key))});return We.seriesCanvasMulti().series([s,i,l])}function Wo(e){return function(t,n){let r=qr(n,Re(n)),a=Ct.indicatorBollingerBands().value(g=>g.openValue),o=r.map(g=>{let x=a(g);return g.map((b,S)=>Object.assign({bollinger:x[S]},b))}),i=r.map(g=>g.key).concat(n.hideKeys?n.hideKeys:[]).sort(),l=J().domain(i).settings(n).mapFunction(Te(1))(),s=E().settings(n).scale(i.length>1?l:null),c=Zr(n,e,l),u=Ct.seriesCanvasMulti().mapping((g,x)=>g[x]).series(o.map(()=>c)),d=R().pad([.1,.1]).padUnit("percent"),m=A(n).settingName("crossValues").valueName("crossValue")(o),p=A(n).settingName("mainValues").valueNames(["lowValue","highValue"]).memoValue(n.axisMemo[1]).orient("vertical").paddingStrategy(d)(o),h=Ee(m,p).plotArea(P(u,n).orient("vertical").canvas(!0));h.yNice&&h.yNice();let f=F().chart(h).settings(n).xScale(m.scale).onChange(g=>{let x=o.map(b=>b.filter(S=>S.crossValue>=g.xDomain[0]&&S.crossValue<=g.xDomain[1]));h.yDomain(p.domainFunction(x))}).canvas(!0),y=Y().settings(n).xScale(m.scale).yScale(p.scale).yValueName("closeValue").color(l).data(o).canvas(!0);t.datum(o).call(f),t.call(y),t.call(s)}}var At=Wo;var Jr=At(jo);Jr.plugin={name:"OHLC",category:"Y Chart",max_cells:3500,max_columns:50,render_warning:!0,initial:{type:"number",count:1,names:["Open","Close","High","Low","Tooltip"]},selectMode:"toggle"};var Qr=Jr;import{seriesCanvasCandlestick as Yo}from"d3fc/index.js";var ea=At(Yo);ea.plugin={name:"Candlestick",category:"Y Chart",max_cells:4e3,max_columns:50,render_warning:!0,initial:{type:"number",count:1,names:["Open","Close","High","Low","Tooltip"]},selectMode:"toggle"};var ta=ea;import*as an from"d3";function na(e,t){if(e.realValues.length>1&&e.realValues[1]!==null){let n=e.realValues[1];if(e.mainValues.find(r=>r.name===n)?.type==="string"){let r=t.map(a=>a.data).filter(a=>a.height>0).map(a=>ra(a)).reduce((a,o)=>a.concat(o));return Ce(e,r)}else return be(e,null,null,Sn(t.map(r=>r.extents)))}}function ra(e,t=[]){return e.children&&e.children.length>0?e.children.forEach(n=>t.concat(ra(n,t))):e.data.color&&t.push(e.data.color),t}import*as Tt from"d3";function Lt(e){let t={},n=e.realValues.map(a=>a===null?null:e.mainValues.find(o=>o.name===a));return e.data.forEach((a,o)=>{let i=Array.isArray(a.__ROW_PATH__)?a.__ROW_PATH__:[];Ko(a).forEach(s=>{let c;t[s]||(t[s]=[]),c=t[s],i.forEach((u,d)=>{let m=c.find(p=>p.name===u);if(m||(m={name:u,children:[]},c.push(m)),e.realValues.length>1&&e.realValues[1]!==null){let p=d===i.length-1,h=je(p?a:e.agg_paths[o][d+1]||a,e.mainValues[1],s);h!==void 0&&(m.color=h)}if(e.realValues.length>2&&e.realValues[2]!==null){m.tooltip=[];for(let p=2;p<e.realValues.length;++p)m.tooltip.push(je(a,n[p],s))}if(d===i.length-1){if(m.name=i.slice(-1)[0],e.crossValues.length===0)m.size=je(a,e.mainValues[0],"");else if(i.length===e.crossValues.length){let p=je(a,e.mainValues[0],s);m.size=p>0?p:0}}c=m.children})})}),Object.entries(t).map(a=>{let o={name:"root",children:a[1]},i=Tt.hierarchy(o).sum(s=>s.size),l=Tt.partition().size([2*Math.PI,i.height+1])(i);return l.each(s=>{s.current=s,s.mainValues=e.realValues.length===1||e.realValues[1]===null&&e.realValues[2]===null?s.value:[s.value,s.data.color].concat(s.data.tooltip||[]).filter(c=>c!==void 0),s.crossValue=s.ancestors().slice(0,-1).reverse().map(c=>c.data.name),s.key=a[0],s.label=oe(e.crossValues[s.depth-1<0?0:s.depth-1]?.type||e.mainValues[0].type,s.data.name)}),{split:a[0],data:l,extents:Uo(e,a)}})}var je=(e,t,n)=>n.length?e[`${n}|${t.name}`]:e[t.name];function Uo(e,[t,n]){if(e.realValues.length>1&&e.realValues[1]!==null){let r=Math.min(...e.data.map(o=>je(o,e.mainValues[1],t))),a=Math.max(...n.map(o=>o.color));return[r,a]}}function Ko(e){let t=[];return Object.keys(e).forEach(n=>{if(n!=="__ROW_PATH__"){let r=n.split("|").slice(0,-1).join("|");t.includes(r)||t.push(r)}}),t}import{arc as Xo}from"d3";var Dt=e=>Xo().startAngle(t=>t.x0).endAngle(t=>t.x1).padAngle(t=>Math.min((t.x1-t.x0)/2,.005)).padRadius(e).innerRadius(t=>Math.max(1,(t.y0-1)*e)).outerRadius(t=>Math.max((t.y0-1)*e,(t.y1-1)*e-1)),le=e=>e.y0>=1&&e.x1>e.x0;import{select as qo}from"d3";var et=e=>e.y1<=3&&e.y0>=1&&(e.y1-e.y0)*(e.x1-e.x0)>.06;function kt(e,t){let n=(e.x0+e.x1)/2*180/Math.PI,r=(e.y0-1+(e.y1-1))/2*t;return`rotate(${n-90}) translate(${r},0) rotate(${n<180?0:180})`}function aa(e,t){let n=this.getBBox().width;if(n>t){let r=e.label,a=qo(this);for(;n>t;)r=r.substring(0,r.length-1),a.text(()=>r),n=this.getBBox().width;a.text(()=>`${r.substring(0,r.length-3).replace(/\s+$/,"")}...`)}}import{interpolate as Zo}from"d3";var oa=(e,t,n,r,a,o,i,l,s)=>(c,u)=>{s.sunburstLevel[l]=c.data.name,c.parent?(n.datum(c.parent),n.style("cursor","pointer"),r.html(`&#8682; ${c.label}`)):(n.datum(e),n.style("cursor","default"),r.html("")),e.each(m=>m.target={x0:Math.max(0,Math.min(1,(m.x0-c.x0)/(c.x1-c.x0)))*2*Math.PI,x1:Math.max(0,Math.min(1,(m.x1-c.x0)/(c.x1-c.x0)))*2*Math.PI,y0:Math.max(0,m.y0-c.depth),y1:Math.max(0,m.y1-c.depth)});let d=t.transition().duration(u?0:750);a.transition(d).tween("data",m=>{let p=Zo(m.current,m.target);return h=>m.current=p(h)}).filter(function(m){return+this.getAttribute("fill-opacity")||le(m.target)}).attr("fill-opacity",m=>le(m.target)?1:0).attr("user-select",m=>le(m.target)?"initial":"none").style("pointer-events",m=>le(m.target)?"initial":"none").attrTween("d",m=>()=>Dt(i)(m.current)),o.filter(function(m){return+this.getAttribute("fill-opacity")||et(m.target)}).transition(d).attr("fill-opacity",m=>+et(m.target)).attrTween("transform",m=>()=>kt(m.current,i))};function ia(){let e=null,t=null,n=null,r=null,a=null,o=i=>{let l=i.selectAll("g.segment").data(n.descendants().slice(1)),s=l.enter().append("g").attr("class","segment");s.append("path"),s.append("text").attr("class","segment").attr("dy","0.35em");let c=s.merge(l),u=c.select("path").attr("fill-opacity",f=>le(f.current)?1:0).attr("user-select",f=>le(f.current)?"initial":"none").style("pointer-events",f=>le(f.current)?"initial":"none").attr("d",f=>Dt(a)(f.current));r&&u.style("fill",f=>r(f.data.color));let d=c.select("text").attr("fill-opacity",f=>+et(f.current)).attr("transform",f=>kt(f.current,a)).text(f=>f.label).each(function(f){aa.call(this,f,a)}),m=i.select("text.parent"),p=i.select("circle").attr("r",a).datum(n),h=oa(n,i,p,m,u,d,a,t,e);if(e.sunburstLevel){let f=n.descendants().find(y=>y.data.name===e.sunburstLevel[t]);f&&h(f,!0)}else e.sunburstLevel={};p.on("click",f=>h(f,!1)),u.filter(f=>f.children).style("cursor","pointer").on("click",f=>h(f,!1))};return o.settings=(...i)=>i.length?(e=i[0],o):e,o.split=(...i)=>i.length?(t=i[0],o):t,o.data=(...i)=>i.length?(n=i[0],o):n,o.color=(...i)=>i.length?(r=i[0],o):r,o.radius=(...i)=>i.length?(a=i[0],o):a,o}function la(e,t){let n=Lt(t),r=na(t,n),a=Ge().elementsPrefix("sunburst");if(e.datum(n).call(a),r){let u=t.realValues[1];if(t.mainValues.find(d=>d.name===u)?.type==="string"){let d=E().settings(t).scale(r);e.call(d)}else{let d=Ve().scale(r);e.call(d)}}let o=a.chartContainer(),i=a.chartEnter(),l=a.chartDiv(),s=a.chartTitle(),c=a.containerSize();s.each((u,d,m)=>an.select(m[d]).text(u.split)),o.append("circle").attr("fill","none").style("pointer-events","all"),o.append("text").attr("class","parent"),i.merge(l).select("svg").select("g.sunburst").attr("transform",`translate(${c.width/2}, ${c.height/2})`).each(function({split:u,data:d}){let m=an.select(this),p=this.parentNode,{width:h,height:f}=p.getBoundingClientRect(),y=(Math.min(h,f)-24)/Math.max(2,t.crossValues.length*2);ia().settings(t).split(u).data(d).color(r).radius(y)(m),he().settings(t)(m.selectAll("g.segment"))})}la.plugin={name:"Sunburst",category:"Hierarchial Chart",max_cells:7500,max_columns:50,render_warning:!0,initial:{type:"number",count:1,names:["Size","Color","Tooltip"]}};var sa=la;import*as rt from"d3";function ca(e,t){if(e.realValues.length<1||e.realValues[1]===null||e.realValues[1]===void 0)return;let n=e.realValues[1],r=t.filter(a=>a.height>0).map(a=>ua(a)).reduce((a,o)=>a.concat(o));if(e.mainValues.find(a=>a.name===n)?.type==="string")return Ce(e,r);{let a=Math.min(...r),o=Math.max(...r);return be(e,null,null,[a,o])}}function ua(e,t=[]){return e.children&&e.children.length>0?e.children.forEach(n=>t.concat(ua(n,t))):e.data.color&&t.push(e.data.color),t}import{select as B}from"d3";var ma=7,Nt=e=>!!(e.target&&e.target.textAttributes),Mt=(e,t,n)=>{e.selectAll("text").each(function(a,o){let i=ti(a,t,n);this.style=i});let r=nt(e);Jo(r),on(r)},pa=e=>{e.each((t,n,r)=>{B(r[n]).selectAll("text").attr("dx",t.target.textAttributes.dx).attr("dy",t.target.textAttributes.dy).attr("style",t.target.textAttributes.style)})},on=e=>{let r=o=>o.getBoundingClientRect(),a=[];e.selectAll("text").filter((o,i,l)=>B(l[i]).attr("style")===Ne.high).each((o,i,l)=>a.push(l[i])),e.selectAll("text").filter((o,i,l)=>B(l[i]).attr("style")===Ne.low).each((o,i,l)=>{let s=l[i];a.filter(c=>Kt("x",r(c),r(s))&&Kt("y",r(c),r(s),-2)).forEach(()=>B(s).attr("dy",Number(B(s).attr("dy"))+14))})},da=e=>B(e).style("opacity",tt[B(e).attr("class")]),ha=e=>B(e).style("opacity",null),tt={top:1,mid:.7,lower:0},nt=e=>e.filter((t,n,r)=>B(r[n]).selectAll("text").attr("style")!==Ne.zero),zt=e=>e.selectAll("text").each((t,n,r)=>Qo(r[n])),Jo=e=>e.selectAll("text").each((t,n,r)=>fa(r[n])),fa=e=>{let t=B(e),n=e.getBoundingClientRect();t.attr("dx",0-n.width/2).attr("dy",0+n.height/4)},Qo=e=>{let n=e.parentNode.childNodes[0],r=e.getBBox(),a=n.getBBox();ei(e,a,r)||B(e).attr("style",B(e).attr("style"))},ei=(e,t,n)=>{let r=Math.min(t.height/n.height,t.width/n.width);if(r<1){let a=parseInt(B(e).style("font-size")),o=Math.floor(a*r);return a>ma&&o>ma?(B(e).style("font-size",`${o}px`),fa(e)):(B(e).style("font-size",null),B(e).style("opacity","0")),!0}return!1},ti=(e,t,n)=>{if(!n.filter(r=>r!=="").every(r=>e.crossValue.includes(r)))return Ne.zero;switch(e.depth){case t+1:return Ne.high;case t+2:return Ne.low;default:return Ne.zero}},Ne={high:"font-size:14px;z-index:5;pointer-events: none;",low:"font-size:8px;opacity:0.7;z-index:4;",zero:"font-size:0px;opacity:0;z-index:4;"};import*as Ot from"d3";var Pt=(e,t)=>{let n=Ot.treemap().size([e,t]).paddingInner(r=>1+2*(r.height-1));return n.tile(Ot.treemapBinary),n};import*as re from"d3";import{hierarchy as ni,select as ln}from"d3";var ri=(e,t)=>t.every(n=>e.crossValue.includes(n));function sn(e,t,n,r,a,o){ai(e,t,n,r,a),e.mapLevel[r].levelRoot=!0,oi(e,o.node().getBoundingClientRect().width,o.node().getBoundingClientRect().height,r),ya(n,r)}function ga(e,t){e.each(n=>{n.mapLevel=[],n.mapLevel[0]={x0:n.x0,x1:Me(n)+n.x0,y0:n.y0,y1:ze(n)+n.y0,visible:!0,opacity:1}}),t.mapLevel[0].levelRoot=!0,ya(e,0)}var Ft=(e,t)=>{e.each((n,r,a)=>{let o=ln(a[r]).selectAll("text");n.mapLevel[t].textAttributes={dx:o.attr("dx"),dy:o.attr("dy"),class:o.attr("class"),"font-size":o.style("font-size")}})};function ai(e,t,n,r,a){let o={x:e.x0,y:e.y0,width:e.x1-e.x0,height:e.y1-e.y0},i={width:a.x1-a.x0,height:a.y1-a.y0},l={width:i.width/o.width,height:i.height/o.height};n.each(s=>{let c=(s.x0-o.x)*l.width,u=(s.y0-o.y)*l.height,d=Me(s)*l.width,m=ze(s)*l.height,p=ri(s,t)&&s.data.name!==t[r-1];s.mapLevel[r]={x0:c,x1:d+c,y0:u,y1:m+u,visible:p,opacity:p?1:0}}),e.mapLevel[r].levelRoot=!0}function oi(e,t,n,r){let i=Pt(t,n)(ni(e.data).sum(s=>s.size)).descendants(),l=e.descendants();i.forEach((s,c)=>{l[c].mapLevel[r].x0=i[c].x0,l[c].mapLevel[r].x1=i[c].x1,l[c].mapLevel[r].y0=i[c].y0,l[c].mapLevel[r].y1=i[c].y1})}function ya(e,t){e.selectAll("text").each((n,r,a)=>{let o=ln(a[r]),i=ln(a[r]).datum(),l=o.attr("class");i.mapLevel[t].textLockedAt={opacity:tt[l]}})}function xa(e,t,n,r,a,o,i,l,s){if(r.treemapLevel>0){let c=i.crossValue;un(i,e,t,n,r,a,o,i,0,c,l,s,1,!1),r.treemapRoute.slice(1,r.treemapRoute.length).forEach(u=>{let d=t.filter(p=>p.crossValue===u).datum(),m=d.crossValue;sn(d,m,t,d.depth,i,a),un(d,e,t,n,r,a,o,i,d.depth,m,l,s,1,!1)})}}function mn(e,t,n,r,a,o,i,l,s,c){if(!e.children)return;a.treemapLevel<e.depth?a.treemapRoute.push(e.crossValue):a.treemapRoute.pop(),a.treemapLevel=e.depth;let u=e.crossValue;(!e.mapLevel[a.treemapLevel]||!e.mapLevel[a.treemapLevel].levelRoot)&&sn(e,u,n,a.treemapLevel,l,o),un(e,t,n,r,a,o,i,l,a.treemapLevel,u,s,c)}function un(e,t,n,r,a,o,i,l,s,c,u,d,m=500,p=!0){let h=e.parent,f=i.transition("main transition").duration(m).ease(re.easeCubicOut);n.each(g=>g.target=g.mapLevel[s]),Nt(e)||ci(n,u),n.transition(f).tween("data",g=>{let x=re.interpolate(g.current,g.target);return b=>g.current=x(b)}).styleTween("opacity",g=>()=>g.current.opacity).attrTween("pointer-events",g=>()=>g.target.visible?"all":"none"),t.transition(f).filter(g=>g.target.visible).styleTween("x",g=>()=>`${g.current.x0}px`).styleTween("y",g=>()=>`${g.current.y0}px`).styleTween("width",g=>()=>`${g.current.x1-g.current.x0}px`).styleTween("height",g=>()=>`${g.current.y1-g.current.y0}px`),r.transition(f).filter(g=>g.target.visible).attrTween("x",g=>()=>g.current.x0+Me(g.current)/2).attrTween("y",g=>()=>g.current.y0+ze(g.current)/2).end().catch(()=>cn(n)).then(()=>{Nt(e)||(on(y),zt(y),ii(r,i,m),p&&Ft(n,s),cn(n,u))}).catch(g=>{console.error("Exception completing promises after main transition",g),cn(n,u)}),Nt(e)?pa(n):(r.each((g,x,b)=>da(b[x])),Mt(n,s,c));let y=nt(n);h?u.hide(!1).text(e.label).onClick(()=>{mn(h,t,n,r,a,o,i,l,u,d);let g=o.node().getRootNode().host.parentElement;Ke(g,h,d)})():u.hide(!0)()}async function ii(e,t,n=400){let r=t.transition("text fade transition").duration(n).ease(re.easeCubicOut);await e.transition(r).filter(a=>a.target.visible).tween("data",(a,o,i)=>{let l=i[o],s=re.interpolate(li(a),si(l));return c=>a.current.opacity=s(c)}).styleTween("opacity",a=>()=>a.current.opacity).end().catch(a=>console.error("Exception in text fade transition",a)).then(()=>e.each((a,o,i)=>ha(i[o])))}var li=e=>e.target.textLockedAt.opacity,si=e=>tt[re.select(e).attr("class")],ci=(e,t)=>{t.deactivate(!0),e.each((n,r,a)=>{re.select(a[r]).selectAll("rect").style("pointer-events","none")})},cn=(e,t=void 0)=>{t&&t.deactivate(!1),e.each((n,r,a)=>{re.select(a[r]).selectAll("rect").style("pointer-events",null)})};var Sa=`<button id="goto-parent">Goto parent</button>
`;function ba(e){let t=null,n=null,r=!0,a=!1,o=O(e,".parent-controls",()=>e.append("div").attr("class","parent-controls").style("display",r?"none":"").html(Sa)),i=()=>{o.style("display",r?"none":"").select("#goto-parent").style("pointer-events",a?"none":null).html(`\u21EA ${n}`).on("click",()=>t())};return i.deactivate=(...l)=>{if(!l.length)return a;a=l[0];let s=o.select("#goto-parent");return a?s.style("pointer-events","none"):s.style("pointer-events",null),i},i.hide=(...l)=>l.length?(r=l[0],i):r,i.text=(...l)=>l.length?(n=l[0],i):n,i.onClick=(...l)=>l.length?(t=l[0],i):t,i}var Et={leaf:"leafnode",branch:"branchnode",root:"rootnode"},Me=e=>e.x1-e.x0,ze=e=>e.y1-e.y0,mi=(e,t)=>t.depth===e,va=(e,t)=>t.depth===0?Et.root:mi(e,t)?Et.leaf:Et.branch;function Va(){let e=null,t=null,n=null,r=null,a=null,o=null,i=l=>{o=ba(a),o();let s=n.height;e.treemapLevel||(e.treemapLevel=0),e.treemapRoute||(e.treemapRoute=[]),Pt(a.node().getBoundingClientRect().width,a.node().getBoundingClientRect().height)(n);let u=l.selectAll("g").data(n.descendants()),d=u.enter().append("g");d.append("rect"),d.append("text");let m=d.merge(u).sort((y,g)=>g.depth-y.depth),p=m.select("rect").attr("class",y=>`treerect ${va(s,y)}`).style("x",y=>`${y.x0}px`).style("y",y=>`${y.y0}px`).style("width",y=>`${Me(y)}px`).style("height",y=>`${ze(y)}px`);p.style("fill",y=>va(s,y)===Et.leaf?y.data.color?r(y.data.color):t.colorStyles.series:"transparent");let h=m.filter(y=>y.value!==0).select("text").attr("x",y=>y.x0+Me(y)/2).attr("y",y=>y.y0+ze(y)/2).text(y=>y.label),f=p.filter(y=>y.crossValue.length===0).datum();ga(m,f),Mt(m,0,[]),zt(nt(m)),Ft(m,0),e.treemapRoute.length===0&&e.treemapRoute.push(f.crossValue),p.filter(y=>y.children).on("click",(y,g)=>mn(g,p,m,h,e,a,l,f,o,t)),xa(p,m,h,e,a,l,f,o,t)};return i.settings=(...l)=>l.length?(e=l[0],t=l[1],i):e,i.data=(...l)=>l.length?(n=l[0],i):n,i.color=(...l)=>l.length?(r=l[0],i):r,i.container=(...l)=>l.length?(a=l[0],i):a,i}function wa(e,t){t.treemaps||(t.treemaps={});let n=Lt(t),r=ca(t,n.map(s=>s.data));r&&this._container.classList.add("has-legend");let a=Ge().elementsPrefix("treemap");if(e.datum(n).call(a),r){let s=t.realValues[1];if(t.mainValues.find(c=>c.name===s)?.type==="string"){let c=E().settings(t).scale(r);e.call(c)}else{let c=Ve().scale(r);e.call(c)}}let o=a.chartEnter(),i=a.chartDiv();a.chartTitle().each((s,c,u)=>rt.select(u[c]).text(s.split)),o.merge(i).select("svg").select("g.treemap").each(function({split:s,data:c}){let u=rt.select(this);t.treemaps[s]||(t.treemaps[s]={}),Va().settings(t.treemaps[s],t).data(c).container(rt.select(rt.select(this.parentNode).node().parentNode)).color(r)(u),he().settings(t).centered(!0)(u.selectAll("g"))})}wa.plugin={type:"Treemap",name:"Treemap",category:"Hierarchial Chart",max_cells:3e3,max_columns:50,render_warning:!0,initial:{type:"number",count:1,names:["Size","Color","Tooltip"]}};var _a=wa;var pi=[lr,yr,Vr,Dr,Or,Hr,jr,Qr,ta,_a,sa,Xr],pn=pi;import*as dn from"d3";import*as Ca from"gradient-parser";var hn=(e,t)=>{if(!t.colorStyles){let n={scheme:[],gradient:{},interpolator:{},grid:{}},r=fi(e);n.series=r("--d3fc-series");for(let o=1;;o++){let i=`series-${o}`,l=r(`--d3fc-${i}`);if(!l)break;n[i]=l,n.scheme.push(l)}n.opacity=di(n.series),n.grid.gridLineColor=r`--d3fc-gridline--color`,["full","positive","negative"].forEach(o=>{let i=r(`--d3fc-${o}--gradient`);n.gradient[o]=gi(i,n.opacity)}),t.colorStyles=n}if(!t.textStyles){let n=window.getComputedStyle(e),r=n.getPropertyValue("color"),a=`12px ${n.getPropertyValue("font-family")}`;t.textStyles={color:r,font:a}}},di=e=>dn.color(e).opacity,hi=(e,t)=>{let n=dn.color(`#${e}`);return n.opacity=t,n+""},fi=e=>{let t=getComputedStyle(e);return n=>t?.getPropertyValue(n)},gi=(e,t)=>{let n=Ca.parse(e)[0].colorStops;return n.map((r,a)=>[r.length?r.length.value/100:a/(n.length-1),hi(r.value,t)]).sort((r,a)=>r[0]-a[0])};var Aa=':host{user-select:none;}:host .chart{position:absolute;box-sizing:border-box;left:0;top:0;width:100%;height:100%;padding:12px;overflow:hidden;}:host .chart.yline .y-series:not(:first-child) .gridline-x{display:none;}:host .chart text{font-family:var(--interface-monospace--font-family);}:host .chart.heatmap d3fc-group.cartesian-chart,:host .chart.treemap d3fc-group.cartesian-chart{grid-template-columns:minmax(0em,max-content)auto 1fr auto minmax(0em,max-content);grid-template-rows:minmax(0em,max-content)auto 1fr auto minmax(0em,max-content);}:host .chart .chart-label{display:none;}:host .chart.heatmap{padding-right:120px;}:host .chart.xyscatter{padding:0;font-size:14px;}:host .chart.xyscatter d3fc-group:first-child{padding:16px;padding-top:0px;width:calc(100% - 32px);height:calc(100% - 16px);}:host .chart.xyscatter .multi-xlabel{position:absolute;bottom:0;height:2.5em;width:100%;display:flex;justify-content:center;align-items:center;background:var(--d3fc-legend--background);}:host .chart.xyscatter .multi-ylabel{position:absolute;top:0;width:2.5em;height:100%;display:flex;justify-content:center;align-items:center;background:var(--d3fc-legend--background);}:host .chart.xyscatter .outer-container{height:100%;}:host .chart.xyscatter .inner-container{display:inline-grid;overflow-y:auto;width:calc(100% - 16px);height:100%;padding:0;margin:0;}:host .chart.xyscatter .inner-container div{overflow:hidden;}:host .chart.xyscatter .inner-container text.segment,:host .chart.xyscatter .inner-container text.parent{text-anchor:middle;user-select:none;pointer-events:none;fill:var(--d3fc-treedata--labels,rgb(51,51,51));}:host .chart.xyscatter .inner-container div.xy-scatter-container{margin:5px 0;}:host .chart.sunburst{padding:0;font-size:14px;}:host .chart.sunburst .outer-container{height:100%;}:host .chart.sunburst .inner-container{width:100%;height:100%;display:inline-grid;padding:0;margin:0;overflow-x:hidden;overflow-y:auto;}:host .chart.sunburst .inner-container div{overflow:hidden;}:host .chart.sunburst .inner-container .sunburst-container:not(:only-child) svg{transform:translate(0,-27px);}:host .chart.sunburst .inner-container svg{width:100%;height:100%;}:host .chart.sunburst .inner-container path{fill:var(--d3fc-series,rgba(31,119,180,0.5));}:host .chart.sunburst .inner-container text.segment,:host .chart.sunburst .inner-container text.parent{text-anchor:middle;user-select:none;pointer-events:none;fill:var(--d3fc-treedata--labels,rgb(51,51,51));}:host .chart.sunburst .inner-container div.title-container{margin-top:5px;}:host .chart.has-legend{padding-right:120px;}:host .chart.treemap .treemap-container{position:relative;}:host .chart.treemap .treemap-container:not(:only-child){width:calc(100% - 12px);height:calc(100% - 12px);}:host .chart.treemap .outer-container{height:100%;}:host .chart.treemap .inner-container{width:100%;height:100%;display:inline-grid;padding:0;margin:0;overflow-x:hidden;overflow-y:auto;}:host .chart.treemap .inner-container div{overflow:hidden;}:host .chart.treemap .inner-container svg{width:100%;height:100%;}:host .chart.treemap .inner-container .treerect{stroke:var(--d3fc-treedata-axis--lines,var(--d3fc-axis--lines,white));fill:var(--d3fc-series,rgba(31,119,180,0.5));}:host .chart.treemap .inner-container .treerect:hover{cursor:pointer;stroke:var(--d3fc-treedata--hover-highlight,black);stroke-opacity:1;}:host .chart.treemap .inner-container .rootnode{opacity:0;pointer-events:none;z-index:0;}:host .chart.treemap .inner-container .branchnode{opacity:0;}:host .chart.treemap .inner-container .branchnode:hover{fill-opacity:0.1;opacity:1;fill:var(--d3fc-treedata--hover-highlight,black);}:host .chart.treemap .inner-container .leafnode{fill-opacity:0.8;}:host .chart.treemap .inner-container .leafnode:hover{fill-opacity:0.5;}:host .chart.treemap .inner-container #hidden{opacity:0;pointer-events:none;z-index:0;}:host .chart.treemap .inner-container .top{font-size:14px;z-index:5;pointer-events:none;}:host .chart.treemap .inner-container .mid{font-size:8px;opacity:0.7;z-index:4;}:host .chart.treemap .inner-container .lower{font-size:0px;opacity:0;z-index:4;}:host .chart.treemap .inner-container text{fill:var(--d3fc-treedata--labels,rgb(51,51,51));}:host .chart.treemap .inner-container text.title{dominant-baseline:hanging;}:host .chart.treemap .inner-container .parent-controls{position:absolute;top:12px;right:auto;left:30px;width:auto;z-index:4;transition:box-shadow 1s;}:host .chart.treemap .inner-container .parent-controls:hover{box-shadow:2px 2px 6px#000;transition:box-shadow 0.2s;}:host .chart .x-label{height:1.2em!important;line-height:1em!important;}:host .chart .x-label,:host .chart .y-label{color:var(--d3fc-label--color,inherit);font-size:14px;}:host .chart d3fc-canvas.plot-area{display:none;}:host .chart.xyscatter d3fc-canvas.plot-area,:host .chart.xyline d3fc-canvas.plot-area,:host .chart.ohlc d3fc-canvas.plot-area,:host .chart.candlestick d3fc-canvas.plot-area,:host .chart.heatmap d3fc-canvas.plot-area{display:block;}:host .chart .y-axis text,:host .chart .y2-axis text,:host .chart .x-axis text{fill:var(--d3fc-axis-ticks--color,rgb(80,80,80));font-size:11px;}:host .chart .y-axis path,:host .chart .y2-axis path,:host .chart .x-axis path{stroke:var(--d3fc-axis--lines,rgb(180,210,225));}:host .chart .splitter-label{display:inline-block;margin:0 10px;cursor:pointer;}:host .chart .splitter-label::after{margin-left:5px;color:var(--d3fc-axis--lines,rgb(180,210,225));}:host .chart .splitter-label:hover::after{color:var(--d3fc-axis-ticks--color,rgb(80,80,80));}:host .chart .splitter-label.disabled::after{color:rgba(80,80,80,0.3);}:host .chart .splitter-label.disabled{cursor:default;}:host .chart .y-label.left-label .splitter-label::after{background-repeat:no-repeat;background-color:var(--icon--color);content:"";display:inline-block;-webkit-mask-size:cover;mask-size:cover;width:16px;height:12px;-webkit-mask-image:var(--sort-desc-icon--mask-image);mask-image:var(--sort-desc-icon--mask-image);}:host .chart .y-label.right-label .splitter-label::after{background-repeat:no-repeat;background-color:var(--icon--color);content:"";display:inline-block;-webkit-mask-size:cover;mask-size:cover;width:16px;height:12px;-webkit-mask-image:var(--sort-asc-icon--mask-image);mask-image:var(--sort-asc-icon--mask-image);}:host .chart.ybar .y-axis path,:host .chart.yline .y-axis path,:host .chart.xyline .y-axis path,:host .chart.ybar .y2-axis path,:host .chart.yline .y2-axis path,:host .chart.xyline .y2-axis path,:host .chart.xyline .x-axis path,:host .chart.yarea .y-axis path,:host .chart.yscatter .y-axis path,:host .chart.xyscatter .y-axis path,:host .chart.yarea .y2-axis path,:host .chart.yscatter .y2-axis path,:host .chart.xyscatter .y2-axis path,:host .chart.xyscatter .x-axis path,:host .chart.xbar .x-axis path{visibility:hidden;}:host .chart .y-label{white-space:nowrap;}:host .chart .nearbyTip{fill:var(--d3fc-series,rgba(31,119,180,0.5));}:host #dragHandles{position:absolute;top:0px;right:0px;left:auto;pointer-events:none;}:host #dragHandles rect{pointer-events:all;}:host .label rect{fill:none;}:host .legend-container{position:absolute;top:12px;right:12px;left:auto;width:150px;height:280px;}:host .legend-container.legend-color{width:90px;height:150px;}:host .legend-container[borderbox-on-hover="true"]{transition:box-shadow 1s;}:host .legend-container[borderbox-on-hover="true"]:hover{background-color:var(--d3fc-legend--background,#ffffff);transition:box-shadow 0.2s,background-color 0.2s;}:host .legend-container .legend{font-size:8pt;width:100%;}:host .legend-container .legend .cell{cursor:pointer;}:host .legend-container .legend .cell path{fill:var(--d3fc-series,rgba(31,119,180,0.5));stroke:var(--d3fc-series,rgb(31,119,180));}:host .legend-container .legend .cell.hidden path{fill:rgba(204,204,204,0.5);stroke:rgb(204,204,204);}:host .legend-container .legend .cell.hidden circle{fill:rgb(204,204,204)!important;}:host .legend-container text{fill:var(--d3fc-legend--text,rgb(51,51,51));}:host .legend-container .label:hover{fill:rgb(34,160,206);}:host .legend-container #legend-axis path{stroke:var(--d3fc-legend--text,rgb(51,51,51));}:host .legend-container .legend-controls{margin-left:12px;}:host .legend-container .legend-controls #up-arrow,:host .legend-container .legend-controls #down-arrow{cursor:pointer;color:rgb(31,119,180);}:host .legend-container .legend-controls #up-arrow.disabled,:host .legend-container .legend-controls #down-arrow.disabled{cursor:default;color:rgb(51,51,51);}:host .heatmap .legend-container.legend-color{height:200px;}:host .treemap .legend-container.legend-color{height:200px;}:host .treemap .legend-container:not(.legend-color){width:100px;}:host .zoom-controls{position:absolute;top:10px;left:0;width:100%;text-align:center;}:host .zoom-controls button{-webkit-appearance:none;background:var(--plugin--background,rgb(247,247,247));border:1px solid var(--inactive--color,rgb(204,204,204));color:var(--d3fc-label--color,inherit);font-size:12px;padding:8px;opacity:0.5;cursor:pointer;}:host .zoom-controls button:hover{opacity:1;}:host .parent-controls{position:absolute;top:30px;right:145px;width:100%;text-align:right;}:host .parent-controls button{-webkit-appearance:none;background:rgb(247,247,247);border:1px solid rgb(204,204,204);padding:10px;opacity:0.5;cursor:pointer;}:host .parent-controls button:hover{background:rgb(230,230,230);}:host div.tooltip{position:absolute;text-align:left;font-size:12px;font-weight:300;white-space:nowrap;padding:0.5em;background:var(--d3fc-tooltip--background,#ffffff);color:var(--d3fc-tooltip--color,black);border:1px solid var(--d3fc-tooltip--border-color,#777777);box-shadow:var(--d3fc-tooltip--box-shadow,none);pointer-events:none;}:host div.tooltip ul{margin:0;padding:0;list-style-type:none;}';import*as La from"d3";import*as Da from"@d3fc/d3fc-chart/src/css.js";import*as ka from"@d3fc/d3fc-element/src/css.js";var Ta={initial:{type:"number",count:1,names:[]},selectMode:"select"},xi=[Da.css,ka.css,Aa].map(e=>{let t=new CSSStyleSheet;return t.replaceSync(e),t}),fn=["crossValues","mainValues","realValues","splitValues","filter","data","size","colorStyles","textStyles","agg_paths","treemaps","axisMemo","columns_config"];async function Si(e){await customElements.get("perspective-viewer").registerPlugin(e)}function Na(...e){let t=new Set(e.length>0?e:pn.map(n=>n.plugin.name));pn.forEach(n=>{if(t.has(n.plugin.name)){let a=`perspective-viewer-d3fc-${n.plugin.name.toLowerCase().replace(/[ \t\r\n\/]*/g,"")}`;customElements.define(a,class extends gn{_chart=n;static _chart=n}),customElements.whenDefined("perspective-viewer").then(()=>Si(a))}})}Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector);var gn=class extends HTMLElement{_chart;static _chart;_settings;render_warning;_initialized;_container;_staged_view;config;constructor(){super(),this._settings=null,this.render_warning=!0}connectedCallback(){if(!this._initialized){this.attachShadow({mode:"open"});for(let t of xi)this.shadowRoot.adoptedStyleSheets.push(t);this.shadowRoot.innerHTML+='<div id="container" class="chart"></div>',this._container=this.shadowRoot.querySelector(".chart"),this._initialized=!0}}get name(){return this._chart.plugin.name}get category(){return this._chart.plugin.category}get select_mode(){return this._chart.plugin.selectMode||"select"}get min_config_columns(){return this._chart.plugin.initial?.count||Ta.initial.count}get config_column_names(){return this._chart.plugin.initial?.names||Ta.initial.names}static get max_cells(){return this._chart.plugin.max_cells||1e4}static set max_cells(t){this._chart.plugin.max_cells=t}static get max_columns(){return this._chart.plugin.max_columns||50}static set max_columns(t){this._chart.plugin.max_columns=t}get max_cells(){return this._chart.plugin.max_cells||1e4}set max_cells(t){this._chart.plugin.max_cells=t}get max_columns(){return this._chart.plugin.max_columns||50}set max_columns(t){this._chart.plugin.max_columns=t}can_render_column_styles(t,n){return this._chart.can_render_column_styles?.call(this,t,n)}column_style_controls(t,n){return this._chart.column_style_controls?.call(this,t,n)}async render(){var t=document.createElement("canvas"),n=this.shadowRoot.querySelector("#container");t.width=n.offsetWidth,t.height=n.offsetHeight;let r=t.getContext("2d");r.fillStyle=window.getComputedStyle(this).getPropertyValue("--plugin--background")||"white",r.fillRect(0,0,t.width,t.height);let a=window.getComputedStyle(this).getPropertyValue("color"),o=Array.from(this.shadowRoot.querySelectorAll("svg:not(#dragHandles)"));for(let c of o.reverse()){var i=document.createElement("img");let u=0;i.width=c.parentElement?c.parentElement.offsetWidth:u,i.height=c.parentElement?c.parentElement.offsetHeight:u;let d=c.cloneNode(!0);d.hasAttribute("viewBox")||d.setAttribute("viewBox",`0 0 ${i.width} ${i.height}`),d.setAttribute("xmlns","http://www.w3.org/2000/svg");for(let p of d.querySelectorAll("text"))p.setAttribute("fill",a);var l=new XMLSerializer().serializeToString(d);l=l.replace(/[^\x00-\x7F]/g,"");let m=new Promise((p,h)=>{i.onload=p,i.onerror=h});try{i.src=`data:image/svg+xml;base64,${btoa(l)}`,await m}catch{let h=new Promise((f,y)=>{i.onload=f,i.onerror=y});i.src=`data:image/svg+xml;utf8,${l}`,await h}r.drawImage(i,c.parentNode.offsetLeft,c.parentNode.offsetTop,i.width,i.height)}let s=Array.from(this.shadowRoot.querySelectorAll("canvas"));for(let c of s.reverse())r.drawImage(c,c.parentNode.offsetLeft,c.parentNode.offsetTop,c.width/window.devicePixelRatio,c.height/window.devicePixelRatio);return await new Promise(c=>t.toBlob(u=>c(u)),"image/png")}async draw(t,n,r){if(this.offsetParent===null){this._staged_view=[t,n,r];return}this._staged_view=void 0,this._settings&&(this._settings.axisMemo=[[1/0,-1/0],[1/0,-1/0]]),await this.update(t,n,r,!0)}async update(t,n,r,a=!1){if(this.offsetParent===null)return;let o=this.parentElement,i,l,s=this._chart.plugin.name!=="Sunburst";n&&r?i=t.to_columns_string({end_row:r,end_col:n,leaves_only:s}):n?i=t.to_columns_string({end_col:n,leaves_only:s}):r?i=t.to_columns_string({end_row:r,leaves_only:s}):i=t.to_columns_string({leaves_only:s}),l=await Promise.all([o.save(),o.getTable().then(_=>_.schema()),t.expression_schema(!1),t.schema(!1),i,t.get_config()]);let[c,u,d,m,p,h]=l,f=JSON.parse(p),y=Object.keys(f),g={row(_){let L={};for(let j of y)L[j]=f[j][_];return L}};this.config=c;let x=this.config.columns,b=function(_){let L=u[_];return L||(L=d[_]),L},{columns:S,group_by:v,split_by:w,filter:T}=h,H=f[Object.keys(f)[0]]||[],W=v.length>0?H.reduce((_,L,j)=>{let G=g.row(j);if(G.__ROW_PATH__&&G.__ROW_PATH__.length==v.length)_.agg_paths.push(_.aggs.slice()),_.rows.push(G);else{let Z=G.__ROW_PATH__.filter(we=>we!==void 0).length;_.aggs[Z]=G,_.aggs=_.aggs.slice(0,Z+1)}return _},{rows:[],aggs:[],agg_paths:[]}):{rows:H.map((_,L)=>g.row(L))},z=(_,L)=>v.length?_:{..._,__ROW_PATH__:[L]},N=W.rows.map(z),$={realValues:x,crossValues:v.map(_=>({name:_,type:b(_)})),mainValues:S.map(_=>({name:_,type:m[_]})),splitValues:w.map(_=>({name:_,type:b(_)})),filter:T,data:N,agg_paths:W.agg_paths,...this.config.plugin_config},M={set:(_,L,j)=>(fn.includes(L)||this._container&&this._container.dispatchEvent(new Event("perspective-plugin-update",{bubbles:!0,composed:!0})),_[L]=j,!0)},I=[[1/0,-1/0],[1/0,-1/0]];this._settings=new Proxy({axisMemo:I,...this._settings,...$},M),this._settings.splitMainValues&&this._settings.splitMainValues.length>=S.length&&(this._settings.splitMainValues=[]),hn(this._container,this._settings),a&&(this._container.innerHTML=""),this._draw(),await new Promise(_=>requestAnimationFrame(_))}async clear(){this._container&&(this._container.innerHTML="")}_draw(){if(this.offsetParent!==null){let t=La.select(this._container),r=`chart ${this._chart.plugin.name.toLowerCase().replace(/[ \t\r\n\/]*/g,"")}`;this._settings.size=this._container.getBoundingClientRect(),this._settings.data.length>0?this._chart(t.attr("class",r),this._settings):t.attr("class",`${r} disabled`)}}async resize(t){if(this.offsetParent!==null)if(this._settings?.data!==void 0)this._draw();else{let[n,r,a]=this._staged_view;this._staged_view=void 0,this.draw(n,r,a)}}async restyle(t,n,r){let a=this._settings;a&&(delete a.colorStyles,delete a.textStyles,this.isConnected&&(hn(this._container,this._settings),this.resize(t)))}async delete(){this._container.innerHTML=""}getContainer(){return this._container}save(){let t={...this._settings};return fn.forEach(n=>{delete t[n]}),t}restore(t,n){let r={};for(let a of fn)this._settings?.[a]!==void 0&&(r[a]=this._settings?.[a]);this._settings={...r,...t,columns_config:n}}};Na("Y Area");
//# sourceMappingURL=area.js.map
